try{delete window.xRTML}catch(e){window.xRTML=undefined}(function(b,a){(function(c,g){var f=function(k,h){if(!h){h=function(){}}if(k.length===0){return h()}var i=0;var j=[];var l=function(){k[i](function(m){j[i]=m;if(++i==k.length){if(h){h.apply(j,j)}}else{l()}})};l()};var d=function(k,h){if(!h){h=function(){}}if(k.length===0){return h()}var m=0;var i=0;var j=[];var l=function(){k[m]((function(n){return function(o){j[n]=o;if(++i==k.length){if(h){h.apply(j,j)}return}}})(m));if(++m!=k.length){l()}};l()};c.series=f;c.parallel=d})(b.Async=b.Async||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,g){var d={bind:function(h,i){if(h.bind){h.bind(i)}else{for(var j in i){if(h.addEventListener){h.addEventListener(j,i[j],false)}else{h.attachEvent?h.attachEvent("on"+j,i[j]):h[j]=i[j]}}}},unbind:function(h,i){if(h.unbind){h.unbind(i)}else{for(var j in i){if(h.removeEventListener){h.removeEventListener(j,i[j],false)}else{if(h.detachEvent){h.detachEvent("on"+j,i[j])}else{if(h[j]){delete h[j]}}}}}}},f={bind:function(h){for(var i in h){if(typeof h[i]==="function"){if(!this.listeners[i]){this.listeners[i]=[]}this.listeners[i].push(h[i])}}},unbind:function(h){for(var m in h){if(this.listeners[m] instanceof Array){var l=this.listeners[m];for(var j=0,k=l.length;j<k;j++){if(l[j]===h[m]){l.splice(j,1);break}}}}},fire:function(j){var h;for(var o in j){h={type:o,target:this};for(var l in j[o]){var n=j[o][l];h[l]=n}if(this.listeners[h.type] instanceof Array){var m=new Array();for(var k=0;k<this.listeners[h.type].length;k++){m.push((function(i,p){return function(q){p.call(i,h);q()}})(this,this.listeners[h.type][k]))}b.Async.parallel(m)}}}};c.bind=d.bind;c.unbind=d.unbind;c.extend=function(i){if(!i.listeners){i.listeners={}}for(var h in f){i[h]=f[h]}}})(b.Event=b.Event||{})})(window.xRTML=window.xRTML||{});(function(a){(function(c,b){c.Event.extend(c);c.version="3.2.0";c.lastestBuild="22-03-2013 14:08:59";c.domLoaded=function(){return(document.readyState=="loaded"||document.readyState=="complete")};c.isReady=false;c.isLoaded=false;c.ready=function(d){!c.isReady?c.bind({ready:d}):d()};c.load=function(d){!c.isLoaded?c.bind({load:d}):d()}})(a.xRTML=a.xRTML||{})})(window);(function(b,a){(function(at,aq){var ap,p,z,an,ak,B=b.document,A=B.documentElement,E=("sizcache"+Math.random()).replace(".",""),C=0,am=[].slice,U=[].push,ao="undefined",J=false,n=true,r="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",ar="[\\x20\\t\\n\\r\\f]",R="([*^$|!~]?={1})",K="(?:-?[#_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)",m="\\["+ar+"*("+r+"+)"+ar+"*(?:"+R+ar+"*(?:(['\"])(.*?)\\3|("+K+"+)|)|)"+ar+"*\\]",T=":("+r+"+)(?:\\(([\"']?)([^()]*|.*)\\2\\))?",S=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^\\-]|$)",t=ar+"*([\\x20\\t\\n\\r\\f>+~])"+ar+"*",Y=new RegExp("^"+ar+"*,"+ar+"*"),X=new RegExp("^"+t),ai=new RegExp("("+m.replace("3","4")+"|"+T.replace("2","8")+"|\\\\[>+~]|[^\\x20\\t\\n\\r\\f>+~]|\\\\.)+|"+t,"g"),ah=new RegExp("^"+ar),af=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ag=/^[\x20\t\n\r\f]*[+~][\x20\t\n\r\f]*$/,Z=/:not\($/,ae=/(-?)(\d*)(?:n([+\-]?\d*))?/,ad=/\D/,ab=/h\d/i,ac=/input|select|textarea|button/i,V=/^\+|[\x20\t\n\r\f]*/g,W=/\\(?!\\)/g,aa=/([^,\\\[\]]+|\[[^\[]*\]|\([^\(]*\)|\\.)+/g,P={ID:new RegExp("^#("+r+"+)"),CLASS:new RegExp("^\\.("+r+"+)"),NAME:new RegExp("^\\[name=['\"]?("+r+"+)['\"]?\\]"),TAG:new RegExp("^("+r.replace("[-","[-\\*")+"+)"),ATTR:new RegExp("^"+m),PSEUDO:new RegExp("^"+T),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+ar+"*(even|odd|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n"+ar+"*(?:[+\\-]"+ar+"*\\d+)?))"+ar+"*\\))?","i"),POS:new RegExp(S,"ig"),globalPOS:new RegExp(S,"i")},s={},o=[],v={},q=[],M=function(au){au.sizzleFilter=true;return au},y=function(au){return function(av){return av.nodeName.toLowerCase()==="input"&&av.type===au}},x=function(au){return function(av){var aw=av.nodeName.toLowerCase();return(aw==="input"||aw==="button")&&av.type===au}},f=function(aw){var ax=false,au=B.createElement("div");try{ax=aw(au)}catch(av){}au=null;return ax},g=f(function(au){au.innerHTML="<select></select>";var av=typeof au.lastChild.getAttribute("multiple");return av!=="boolean"&&av!=="string"}),h,l=f(function(au){au.id=E+0;au.innerHTML="<a name='"+E+"'/><div name='"+E+"'/>";A.insertBefore(au,A.firstChild);var av=B.getElementsByName&&B.getElementsByName(E).length===2+B.getElementsByName(E+0).length;h=!B.getElementById(E);A.removeChild(au);return av}),j=f(function(au){au.appendChild(B.createComment(""));return au.getElementsByTagName("*").length===0}),i=f(function(au){au.innerHTML="<a href='#'></a>";return au.firstChild&&typeof au.firstChild.getAttribute!==ao&&au.firstChild.getAttribute("href")==="#"}),k=f(function(au){au.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!au.getElementsByClassName||au.getElementsByClassName("e").length===0){return false}au.lastChild.className="e";return au.getElementsByClassName("e").length!==1});var al=function(aB,au,az,aA){az=az||[];au=au||B;var ax,av,aC,aw,ay=au.nodeType;if(ay!==1&&ay!==9){return[]}if(!aB||typeof aB!=="string"){return az}aC=L(au);if(!aC&&!aA){if((ax=af.exec(aB))){if((aw=ax[1])){if(ay===9){av=au.getElementById(aw);if(av&&av.parentNode){if(av.id===aw){az.push(av);return az}}else{return az}}else{if(au.ownerDocument&&(av=au.ownerDocument.getElementById(aw))&&w(au,av)&&av.id===aw){az.push(av);return az}}}else{if(ax[2]){U.apply(az,am.call(au.getElementsByTagName(aB),0));return az}else{if((aw=ax[3])&&k&&au.getElementsByClassName){U.apply(az,am.call(au.getElementsByClassName(aw),0));return az}}}}}return aj(aB,au,az,aA,aC)};var F=al.selectors={cacheLength:50,match:P,order:["ID","TAG"],attrHandle:{},createPseudo:M,find:{ID:h?function(av,au,ax){if(typeof au.getElementById!==ao&&!ax){var aw=au.getElementById(av);return aw&&aw.parentNode?[aw]:[]}}:function(av,au,ax){if(typeof au.getElementById!==ao&&!ax){var aw=au.getElementById(av);return aw?aw.id===av||typeof aw.getAttributeNode!==ao&&aw.getAttributeNode("id").value===av?[aw]:aq:[]}},TAG:j?function(av,au){if(typeof au.getElementsByTagName!==ao){return au.getElementsByTagName(av)}}:function(ay,au){var ax=au.getElementsByTagName(ay);if(ay==="*"){var av,az=[],aw=0;for(;(av=ax[aw]);aw++){if(av.nodeType===1){az.push(av)}}ax=az}return ax}},relative:{">":{dir:"parentNode",firstMatch:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",firstMatch:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(au){au[1]=au[1].replace(W,"");au[3]=(au[4]||au[5]||"").replace(W,"");if(au[2]==="~="){au[3]=" "+au[3]+" "}return au.slice(0,4)},CHILD:function(au){au[1]=au[1].toLowerCase();if(au[1]==="nth"){if(!au[2]){al.error(au[0])}au[2]=au[2].replace(V,"");var av=ae.exec(au[2]==="even"&&"2n"||au[2]==="odd"&&"2n+1"||!ad.test(au[2])&&"0n+"+au[2]||au[2]);au[2]=+(av[1]+(av[2]||1));au[3]=+av[3]}else{if(au[2]){al.error(au[0])}}return au},PSEUDO:function(au){return P.CHILD.test(au[0])?null:au}},filter:{ID:h?function(au){au=au.replace(W,"");return function(av){return av.getAttribute("id")===au}}:function(au){au=au.replace(W,"");return function(av){var aw=typeof av.getAttributeNode!==ao&&av.getAttributeNode("id");return aw&&aw.value===au}},TAG:function(au){if(au==="*"){return function(){return true}}au=au.replace(W,"").toLowerCase();return function(av){return av.nodeName&&av.nodeName.toLowerCase()===au}},CLASS:function(au){var av=s[au];if(!av){av=s[au]=new RegExp("(^|"+ar+")"+au+"("+ar+"|$)");o.push(au);if(o.length>F.cacheLength){delete s[o.shift()]}}return function(aw){return av.test(aw.className||aw.getAttribute("class")||"")}},ATTR:function(av,aw,au){if(!aw){return function(ax){return al.attr(ax,av)!=null}}return function(ax){var ay=al.attr(ax,av),az=ay+"";if(ay==null){return aw==="!="}switch(aw){case"=":return az===au;case"!=":return az!==au;case"^=":return au&&az.indexOf(au)===0;case"*=":return au&&az.indexOf(au)>-1;case"$=":return au&&az.substr(az.length-au.length)===au;case"~=":return(" "+az+" ").indexOf(au)>-1;case"|=":return az===au||az.substr(0,au.length+1)===au+"-"}}},CHILD:function(ax,av,aw){if(ax==="nth"){var au=C++;return function(aA){var aC,az,ay=0,aB=aA;if(av===1&&aw===0){return true}aC=aA.parentNode;if(aC&&(aC[E]!==au||!aA.sizset)){for(aB=aC.firstChild;aB;aB=aB.nextSibling){if(aB.nodeType===1){aB.sizset=++ay;if(aB===aA){break}}}aC[E]=au}az=aA.sizset-aw;if(av===0){return az===0}else{return(az%av===0&&az/av>=0)}}}return function(ay){var az=ay;switch(ax){case"only":case"first":while((az=az.previousSibling)){if(az.nodeType===1){return false}}if(ax==="first"){return true}az=ay;case"last":while((az=az.nextSibling)){if(az.nodeType===1){return false}}return true}}},PSEUDO:function(ay,ax,au,av,az){var aw=F.pseudos[ay]||F.pseudos[ay.toLowerCase()];if(!aw){al.error("unsupported pseudo: "+ay)}if(!aw.sizzleFilter){return aw}return aw(au,av,az)}},pseudos:{not:M(function(aw,au,ax){var av=u(aw,au,ax);return function(ay){return !av(ay)}}),enabled:function(au){return au.disabled===false},disabled:function(au){return au.disabled===true},checked:function(au){var av=au.nodeName.toLowerCase();return(av==="input"&&!!au.checked)||(av==="option"&&!!au.selected)},selected:function(au){if(au.parentNode){au.parentNode.selectedIndex}return au.selected===true},parent:function(au){return !!au.firstChild},empty:function(au){return !au.firstChild},contains:M(function(au){return function(av){return(av.textContent||av.innerText||G(av)).indexOf(au)>-1}}),has:M(function(au){return function(av){return !!al(au,av).length}}),header:function(au){return ab.test(au.nodeName)},text:function(av){var au=av.getAttribute("type"),aw=av.type;return av.nodeName.toLowerCase()==="input"&&"text"===aw&&(au===null||au.toLowerCase()===aw)},radio:y("radio"),checkbox:y("checkbox"),file:y("file"),password:y("password"),image:y("image"),submit:x("submit"),reset:x("reset"),button:function(au){var av=au.nodeName.toLowerCase();return av==="input"&&"button"===au.type||av==="button"},input:function(au){return ac.test(au.nodeName)},focus:function(av){var au=av.ownerDocument;return av===au.activeElement&&(!au.hasFocus||au.hasFocus())&&!!(av.type||av.href)},active:function(au){return au===au.ownerDocument.activeElement}},setFilters:{first:function(av,au,aw){return aw?av.slice(1):[av[0]]},last:function(aw,au,ax){var av=aw.pop();return ax?aw:[av]},even:function(av,au,ay){var az=[],aw=ay?1:0,ax=av.length;for(;aw<ax;aw=aw+2){az.push(av[aw])}return az},odd:function(av,au,ay){var az=[],aw=ay?0:1,ax=av.length;for(;aw<ax;aw=aw+2){az.push(av[aw])}return az},lt:function(av,au,aw){return aw?av.slice(+au):av.slice(0,+au)},gt:function(av,au,aw){return aw?av.slice(0,+au+1):av.slice(+au+1)},eq:function(aw,au,ax){var av=aw.splice(+au,1);return ax?aw:av}}};F.setFilters.nth=F.setFilters.eq;F.filters=F.pseudos;if(!i){F.attrHandle={href:function(au){return au.getAttribute("href",2)},type:function(au){return au.getAttribute("type")}}}if(l){F.order.push("NAME");F.find.NAME=function(av,au){if(typeof au.getElementsByName!==ao){return au.getElementsByName(av)}}}if(k){F.order.splice(1,0,"CLASS");F.find.CLASS=function(au,av,aw){if(typeof av.getElementsByClassName!==ao&&!aw){return av.getElementsByClassName(au)}}}try{am.call(A.childNodes,0)[0].nodeType}catch(D){am=function(av){var au,aw=[];for(;(au=this[av]);av++){aw.push(au)}return aw}}var L=al.isXML=function(av){var au=av&&(av.ownerDocument||av).documentElement;return au?au.nodeName!=="HTML":false};var w=al.contains=A.compareDocumentPosition?function(au,av){return !!(au.compareDocumentPosition(av)&16)}:A.contains?function(au,aw){var av=au.nodeType===9?au.documentElement:au,ax=aw.parentNode;return au===ax||!!(ax&&ax.nodeType===1&&av.contains&&av.contains(ax))}:function(au,av){while((av=av.parentNode)){if(av===au){return true}}return false};var G=al.getText=function(au){var aw,ay="",av=0,ax=au.nodeType;if(ax){if(ax===1||ax===9||ax===11){if(typeof au.textContent==="string"){return au.textContent}else{for(au=au.firstChild;au;au=au.nextSibling){ay+=G(au)}}}else{if(ax===3||ax===4){return au.nodeValue}}}else{for(;(aw=au[av]);av++){ay+=G(aw)}}return ay};al.attr=function(av,aw){var ax=L(av);if(!ax){aw=aw.toLowerCase()}if(F.attrHandle[aw]){return F.attrHandle[aw](av)}if(g||ax){return av.getAttribute(aw)}var au=(av.attributes||{})[aw];return au?typeof av[aw]==="boolean"?av[aw]?aw:null:au.specified?au.value:null:null};al.error=function(au){throw new Error("Syntax error, unrecognized expression: "+au)};[0,0].sort(function(){return(n=0)});if(A.compareDocumentPosition){an=function(au,av){if(au===av){J=true;return 0}return(!au.compareDocumentPosition||!av.compareDocumentPosition?au.compareDocumentPosition:au.compareDocumentPosition(av)&4)?-1:1}}else{an=function(au,ay){if(au===ay){J=true;return 0}else{if(au.sourceIndex&&ay.sourceIndex){return au.sourceIndex-ay.sourceIndex}}var av,az,aw=[],aA=[],ax=au.parentNode,aB=ay.parentNode,aC=ax;if(ax===aB){return ak(au,ay)}else{if(!ax){return -1}else{if(!aB){return 1}}}while(aC){aw.unshift(aC);aC=aC.parentNode}aC=aB;while(aC){aA.unshift(aC);aC=aC.parentNode}av=aw.length;az=aA.length;for(var aD=0;aD<av&&aD<az;aD++){if(aw[aD]!==aA[aD]){return ak(aw[aD],aA[aD])}}return aD===av?ak(au,aA[aD],-1):ak(aw[aD],ay,1)};ak=function(au,av,ax){if(au===av){return ax}var aw=au.nextSibling;while(aw){if(aw===av){return -1}aw=aw.nextSibling}return 1}}al.uniqueSort=function(aw){var au,av=1;if(an){J=n;aw.sort(an);if(J){for(;(au=aw[av]);av++){if(au===aw[av-1]){aw.splice(av--,1)}}}}return aw};function Q(az,au,ax,ay){for(var av=0,aw=au.length;av<aw;av++){al(az,au[av],ax,ay)}}function I(aB,ay,au,av,aA,ax){var az=[],aw=F.setFilters[ay.toLowerCase()];if(!aw){al.error(ay)}if(aB){Q(aB,av,az,aA)}else{az=aA}return az.length?aw(az,au,ax):[]}function H(aK,av,aF,aJ){var aC,aD,au,aG,ax,aw,aE,aA,ay=aK.match(aa),az=0,aB=ay.length,aH=P.POS,aI=new RegExp("^"+P.POS.source+"(?!"+ar+")","i"),aL=function(){for(var aM=1,aN=arguments.length-2;aM<aN;aM++){if(arguments[aM]===aq){aC[aM]=aq}}};for(;az<aB;az++){aH.exec("");aK=ay[az].replace(ah,"");aG=[];au=0;ax=aJ||null;while((aC=aH.exec(aK))){aA=aC.index+aC[0].length;if(aA>au){aE=aK.slice(au,aC.index);if(aC.length>1){aC[0].replace(aI,aL)}au=aA;aw=[av];if((aD=Z.test(aE))){aE=aE.replace(Z,"").replace(X,"$&*")}if(X.test(aE)){aw=ax||[av];ax=aJ}ax=I(aE,aC[1],aC[2],aw,ax,aD)}if(aH.lastIndex===aC.index){aH.lastIndex++}}if(ax){aG=aG.concat(ax);if((aE=aK.slice(au))&&aE!==")"){Q(aE,aG,aF,aJ)}else{U.apply(aF,aG)}}else{al(aK,av,aF,aJ)}}return aB===1?aF:al.uniqueSort(aF)}(function(){var aw,av,ax,au=function(ay,az,aA){if((av=ay.exec(aw))&&(!az||!F.preFilter[az]||(av=F.preFilter[az](av,aA)))){aw=aw.slice(av[0].length)}return av};ap=function(aC,az,aE){aw=aC;ax=[];var aD,aB,ay=!aE&&az!==B,aA=[ax];if(ay){aw=" "+aw}while(aw){aB=false;if(au(Y)){aA.push(ax=[]);if(ay){aw=" "+aw}}if(au(X)){ax.push({part:av.pop(),captures:av});aB=true}for(aD in F.filter){if(au(P[aD],aD,aE)){av.shift();ax.push({part:aD,captures:av});aB=true}}if(!aB){al.error(aC)}}return aA}})();function c(az,au,av){var aw=au.dir,ay=au.firstMatch,ax=C++;if(!az){az=function(aA){return aA===av}}return ay?function(aB,aA){while((aB=aB[aw])){if(aB.nodeType===1){return az(aB,aA)?aB:false}}}:function(aE,aC){var aA,aD=ax+"."+z,aB=aD+"."+p;while((aE=aE[aw])){if(aE.nodeType===1){if((aA=aE[E])===aB){return false}else{if(typeof aA==="string"&&aA.indexOf(aD)===0){if(aE.sizset){return aE}}else{aE[E]=aB;if(az(aE,aC)){aE.sizset=true;return aE}aE.sizset=false}}}}}}function d(av,au){return av?function(ax,aw){var ay=au(ax,aw);return ay&&av(ay===true?ax:ay,aw)}:au}function O(ay,au,az){var ax,aw,av=0;for(;(ax=ay[av]);av++){if(F.relative[ax.part]){aw=c(aw,F.relative[ax.part],au)}else{ax.captures.push(au,az);aw=d(aw,F.filter[ax.part].apply(null,ax.captures))}}return aw}function N(au){return function(aw,av){var ay,ax=0;for(;(ay=au[ax]);ax++){if(ay(aw,av)){return true}}return false}}var u=al.compile=function(ay,av,aA){var az,aw,ax,au=v[ay];if(au&&au.context===av){au.dirruns++;return au}aw=ap(ay,av,aA);for(ax=0;(az=aw[ax]);ax++){aw[ax]=O(az,av,aA)}au=v[ay]=N(aw);au.context=av;au.runs=au.dirruns=0;q.push(ay);if(q.length>F.cacheLength){delete v[q.shift()]}return au};al.matches=function(av,au){return al(av,null,null,au)};al.matchesSelector=function(au,av){return al(av,null,null,[au]).length>0};var aj=function(aI,au,aG,aH,aM){var ax,aD,az,aB,aw,aJ,aF,aL,aC,ay,aE,aA=(aC=aI.match(aa))&&aC.length===1,aK=aI.match(ai),av=au.nodeType;if(P.POS.test(aI)){return H(aI,au,aG,aH)}if(!aH&&aA&&aK.length>1&&av===9&&!aM&&(aC=P.ID.exec(aK[0]))){au=F.find.ID(aC[1],au,aM)[0];aI=aI.slice(aK.shift().length)}if(au){if(aH){ax=am.call(aH,0)}else{if(aA){ay=(aK.length>=1&&ag.test(aK[0])&&au.parentNode)||au;aE=aK.pop().split(":not");aJ=aE[0];for(az=0,aB=F.order.length;az<aB;az++){aL=F.order[az];if((aC=P[aL].exec(aJ))){ax=F.find[aL]((aC[1]||"").replace(W,""),ay,aM);if(ax!=null){break}}}if(ax&&!aE[1]){aF=aI.length-aJ.length;aI=aI.slice(0,aF)+aI.slice(aF).replace(P[aL],"");if(!aI){U.apply(aG,am.call(ax,0));return aG}}}if(!ax){ax=F.find.TAG("*",au)}}if(aI&&(aD=u(aI,au,aM))){z=aD.dirruns;for(az=0;(aw=ax[az]);az++){p=aD.runs++;if(aD(aw,au)){aG.push(aw)}}}}return aG};if(B.querySelectorAll){(function(){var au,aw=aj,aB=/[^\\],/g,aC=/^[\x20\t\n\r\f]*[+~]/,ax=/'/g,ay=/\=[\x20\t\n\r\f]*([^'"\]]*)[\x20\t\n\r\f]*\]/g,aA=[],az=[":active"],av=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector;f(function(aD){aD.innerHTML="<select><option selected></option></select>";if(!aD.querySelectorAll("[selected]").length){aA.push("\\["+ar+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!aD.querySelectorAll(":checked").length){aA.push(":checked")}});f(function(aD){aD.innerHTML="<p test=''></p>";if(aD.querySelectorAll("[test^='']").length){aA.push("[*^$]="+ar+"*(?:\"\"|'')")}aD.innerHTML="<input type='hidden'>";if(!aD.querySelectorAll(":enabled").length){aA.push(":enabled",":disabled")}});aA=aA.length&&new RegExp(aA.join("|"));aj=function(aN,aD,aL,aM,aO){if(!aM&&!aO&&(!aA||!aA.test(aN))){if(aD.nodeType===9){try{U.apply(aL,am.call(aD.querySelectorAll(aN),0));return aL}catch(aJ){}}else{if(aD.nodeType===1&&aD.nodeName.toLowerCase()!=="object"){var aE,aH=aD,aG=aD.getAttribute("id"),aF=aG||E,aI=aD.parentNode,aK=aC.test(aN);if(aG){aF=aF.replace(ax,"\\$&")}else{aD.setAttribute("id",aF)}if(aK&&aI){aD=aI}try{if(aD){aF="[id='"+aF+"'] ";aE=aF+aN.replace(aB,"$&"+aF);U.apply(aL,am.call(aD.querySelectorAll(aE),0));return aL}}catch(aJ){}finally{if(!aG){aH.removeAttribute("id")}}}}}return aw(aN,aD,aL,aM,aO)};if(av){f(function(aD){au=av.call(aD,"div");try{av.call(aD,"[test!='']:sizzle");az.push(F.match.PSEUDO)}catch(aE){}});az=new RegExp(az.join("|"));al.matchesSelector=function(aE,aF){aF=aF.replace(ay,"='$1']");if(!L(aE)&&!az.test(aF)&&(!aA||!aA.test(aF))){try{var aG=av.call(aE,aF);if(aG||au||aE.document&&aE.document.nodeType!==11){return aG}}catch(aD){}}return al(aF,null,null,[aE]).length>0}}})()}at.Sizzle=al})(b.xRTML=b.xRTML||{})})(window);(function(xRTML,undefined){(function(JSON,undefined){(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())})(xRTML.JSON=xRTML.JSON||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(d,k){var j="xrtml:",c=function(m){return !m.getAttribute("version")||m.getAttribute("version")===b.version},g=function(m){var p=m.getElementsByTagName(j+"connection"),o=[];for(var q=0;q<p.length;++q){if(c(p[q])){var n=p[q];o.push(new l(n));p[q].parentNode.removeChild(p[q--])}}return o},h=function(m){var r=m.getElementsByTagName(j+"storage"),q=[];for(var n=0,o=r.length;n<o;n++){if(c(r[n])){var p=r[n];q.push({id:p.getAttribute("id"),baseurl:p.getAttribute("baseurl"),type:p.getAttribute("type"),connectionid:p.getAttribute("connectionid"),sessionid:p.getAttribute("sessionid"),onready:p.getAttribute("onready")?new Function("event","return "+p.getAttribute("onready")+"(event);"):null,onsession:p.getAttribute("onsession")?new Function("event","return "+p.getAttribute("onsession")+"(event);"):null,onexception:p.getAttribute("onexception")?new Function("event","event","return "+p.getAttribute("onexception")+"(event);"):null});document.getElementsByTagName(j+"storages")[0].removeChild(r[n--])}}return q},f=function(){var n=document,m=document.getElementsByTagName(j+"config");if(m.length==0){return null}if(m.length==1){m=m[0];n=window.attachEvent?document:m}else{throw"xRTML requires a configuration tag per page."}return{debug:b.Common.Converter.toBoolean(m.getAttribute("debug")),logLevel:m.getAttribute("loglevel"),xrtmlActive:b.Common.Converter.toBoolean(m.getAttribute("xrtmlactive")),throwErrors:b.Common.Converter.toBoolean(m.getAttribute("throwerrors")),connectionAttempts:b.Common.Converter.toNumber(m.getAttribute("connectionattempts")),connectionTimeout:b.Common.Converter.toNumber(m.getAttribute("connectiontimeout")),remoteTrace:b.Common.Converter.toBoolean(m.getAttribute("remotetrace")),ortcUrl:m.getAttribute("ortcurl"),ortcLibrary:m.getAttribute("ortclibrary"),connections:g(n),storages:h(n)}},l=function(q,r){var m,n;if(q.attributes){for(var o=0;o<q.attributes.length;++o){m=q.attributes[o];if(m.specified){this[m.nodeName.toLowerCase()]=m.nodeValue}}}if(q.children.length!=0){for(var p=0;p<q.children.length;++p){n=q.children[p],childName=window.addEventListener?n.nodeName.split(":")[1].toLowerCase():n.nodeName.toLowerCase();if(!r){this[childName]=[];new l(n,this[childName])}else{if(n.attributes&&n.attributes.length==1&&n.attributes[0].nodeName=="value"){r.push(n.attributes[0].nodeValue)}else{r.push(new l(n))}if(n.children){new l(n,r)}}}}},i=function(){var q,r=[],o=b.TagManager.getClasses();for(var n=0;n<o.length;++n){q=document.getElementsByTagName(j+o[n]);for(var m=0;m<q.length;++m){var p=q[m];if(!window.addEventListener&&p.scopeName.toLowerCase()!="xrtml"){continue}if(c(p)){var s=new l(p);s.name=o[n];r.push(s);document.body.removeChild(q[m--])}}}return r};b.Event.extend(d);d.read=function(){var m=f();if(m){m.attribute=function(o){return b.Common.Object.insensitiveGetter(this,o)};this.fire({configLoad:{config:m}})}var n=i();if(n.length!=0){this.fire({tagsLoad:{tags:n}})}}})(b.DomParser=b.DomParser||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,g){var f=false,d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;c.extend=function(k){var h=this.prototype;f=true;var l=new this();f=false;for(var j in k){l[j]=typeof k[j]=="function"&&typeof h[j]=="function"&&d.test(k[j])?(function(n,m){return function(){var p=this._super;this._super=h[n];var o=m.apply(this,arguments);this._super=p;return o}})(j,k[j]):k[j]}function i(){if(!f&&this.init){this.init.apply(this,arguments)}}i.prototype=l;i.prototype.constructor=i;i.extend=arguments.callee;return i}})(b.Class=b.Class||function(){})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,f){var d="";b.Event.extend(c);c.logLevels={error:0,warn:1,info:2};c.debug=false;c.logLevel=2;c.connectionAttempts=5;c.connectionTimeout=10000;c.remoteTrace=false;c.heartbeatActive=false;c.heartbeatFails=3;c.heartbeatTime=25;c.ortcLibrary=function(h,g){if(arguments.length!=0){d=h;b.Common.DOM.loadScript({url:h,callback:g})}return d};b.DomParser.bind({configLoad:function(h){var g=h.config;c.debug=g.attribute("debug")?g.attribute("debug"):c.debug;c.logLevel=g.attribute("logLevel")?g.attribute("logLevel"):c.logLevel;c.connectionAttempts=g.attribute("connectionAttempts")?g.attribute("connectionAttempts"):c.connectionAttempts;c.connectionTimeout=g.attribute("connectionTimeout")?g.attribute("connectionTimeout"):c.connectionTimeout;c.remoteTrace=g.attribute("remoteTrace")?g.attribute("remoteTrace"):c.remoteTrace;c.heartbeatActive=g.attribute("heartbeatActive")?g.attribute("heartbeatActive"):c.heartbeatActive;c.heartbeatFails=g.attribute("heartbeatFails")?g.attribute("heartbeatFails"):c.heartbeatFails;c.heartbeatTime=g.attribute("heartbeatTime")?g.attribute("heartbeatTime"):c.heartbeatTime;for(var j=0;j<g.connections.length;++j){b.ConnectionManager.create(g.connections[j])}for(var j=0;j<g.storages.length;++j){b.StorageManager.create(g.storages[j])}}})})(b.Config=b.Config||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,f){var d=(function(){if(typeof console!=="undefined"){return console}var g={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}};return g})();c.log=function(g){if(b.Config.debug===true){d.log(g)}};c.debug=function(g){if(b.Config.debug===true){d.debug?d.debug(g):d.log(g)}};c.info=function(g){if(b.Config.debug===true){d.info?d.info(g):d.log(g)}};c.warn=function(g){if(b.Config.debug===true){d.warn?d.warn(g):d.log(g)}};c.error=function(g){if(b.Config.debug===true){d.error?d.error(g):d.log(g)}if(b.Config.remoteTrace===true){this.fire({error:{error:g}})}};b.Event.extend(c)})(b.Console=b.Console||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,g){var d={uiEffects:{blind:true,bounce:true,clip:true,drop:true,explode:true,fade:true,fold:true,highlight:true,puff:true,pulsate:true,scale:true,shake:true,size:true,slide:true,transfer:true},cssPropsMapping:{"padding-top":"paddingTop"},checkIfEffectFunctionAvailable:function(i){var h=(jQuery&&jQuery.fn&&((typeof jQuery.fn[i]).toLowerCase()=="function"))||(jQuery&&jQuery.effects&&((typeof jQuery.effects[i]).toLowerCase()=="function"));if(!h){b.Error.raise({code:b.Error.Codes.MISSING_LIBRARY,info:{library:"jQuery",module:i,className:"xRTML.Effect.Manager (internal class, no docs available)",methodName:"checkIfEffectFunctionAvailable (internal method, no docs available)"}})}},callJQueryEffect:function(h){b.Console.debug("jQuery effect: Running "+h.effectName+" on element "+h.element.id+" with options "+b.JSON.stringify(h.effectOptions)+" and properties: "+b.JSON.stringify(h.effectProperties));this.checkIfEffectFunctionAvailable(h.effectName);try{if(this.uiEffects[h.effectName]){jQuery.fn.effect.call(jQuery(h.element),h.effectName,h.effectOptions,h.effectSpeed,h.effectCallback)}else{jQuery.fn[h.effectName].call(jQuery(h.element),h.effectProperties,h.effectOptions)}}catch(i){b.Error.raise({code:b.Error.Codes.UNEXPECTED,info:{message:i.message,className:"xRTML.Effect.Manager (internal class, no docs available)",methodName:"callJQueryEffect (internal method, no docs available)"}})}},buildReverseEffectProperties:function(h){var i={};for(var k in h.properties){var j=b.Common.Object.insensitiveGetter(h.element.style,k.replace("-",""));if(!j||j==""){j=b.Common.DOM.getStyle({element:h.element,rule:k})}i[k]=j}return i},cloneJQueryOptions:function(i){var h={};for(prop in i){h[prop]=i[prop]}return h}},f={runEffects:function(h){if(this.effects){if(typeof h.stopCurrent=="undefined"||h.stopCurrent){d.checkIfEffectFunctionAvailable("animate");jQuery(h.element).stop(false,true)}for(var k=0;k<this.effects.length;k++){try{var l=d.cloneJQueryOptions(typeof this.effects[k].options=="object"?this.effects[k].options:b.JSON.parse(this.effects[k].options)),m=typeof this.effects[k].properties=="object"?this.effects[k].properties:b.JSON.parse(this.effects[k].properties),n=d.buildReverseEffectProperties({properties:m,element:h.element})}catch(j){b.Error.raise({code:b.Error.Codes.JSON_PARSE,info:{message:j.message,className:"xRTML.Effect.Provider (internal class, no docs available)",methodName:"runEffects"}})}d.callJQueryEffect({element:h.element,effectName:this.effects[k].name,effectOptions:l,effectProperties:m,effectSpeed:this.effects[k].speed,effectCallback:this.effects[k].callback?(typeof this.effects[k].callback=="function"?this.effects[k].callback:new Function("","return "+this.effects[k].callback+"();")):null,revert:this.effects[k].revert});if(this.effects[k].revert){d.callJQueryEffect({element:h.element,effectName:this.effects[k].name,effectOptions:l,effectProperties:n,effectSpeed:this.effects[k].speed,effectCallback:null,revert:false})}}}}};c.extend=function(i){for(var h in f){i[h]=f[h]}}})(b.Effect=b.Effect||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,f){b.Event.extend(c);c.raise=function(g){var h=new c.XRTMLError(g);new window.Error().stack?b.Console.error(h):d(h);return h};c.XRTMLError=function(g){var h=!!g.code?g.code:b.Error.Codes.UNEXPECTED;this.name=h.type;var i=!!g.info?g.info:{};i.className=!!i.className?i.className:(!!g.target?(!!g.target.name?g.target.name:Object.prototype.toString.call(g.target)):"Unknown");i.id=!!i.id?i.id:(!!g.target?g.target.id:"Unknown");i.message=!!i.message?i.message:g.message;i.arguments=g.arguments;this.message=b.Common.String.template(h.message,i);this.type=h.type;this.target=g.target;this.info=i;c.fire({exception:{error:this}})};c.XRTMLError.prototype=window.Error.prototype;c.Codes={MANDATORY_PROPERTY:{type:"ValidationError",message:"The property {property} is required for a {className} with the id {id}."},INVALID_PROPERTY:{type:"ValidationError",message:"The property {property} of a {className} with the id {id} has the wrong type. The appropriate type would be {validType}."},CONNECTION_INACTIVE:{type:"ConnectionError",message:"Tried to perform an operation on Connection {id} which is not active."},CONNECTION_EXCEPTION:{type:"ConnectionError",message:"An unexpected problem occured on the Connection {id}. {message}"},CONNECTION_NOT_FOUND:{type:"ConnectionError",message:"Unable to find a Connection with the specified id: {id}."},CONNECTION_PROCESS:{type:"ConnectionError",message:"An error ocurred while processing the message {xRTMLMessage} arrived at Connection {id}. {message}"},CONNECTION_ADAPT:{type:"ConnectionError",message:"An error ocurred while adapting the message {originalMessage} arrived at Connection {id}. {message}"},CONNECTION_DUPLICATE:{type:"ConnectionError",message:"Connection with id {id} already exists."},ORTC_NOT_FOUND:{type:"ORTCError",message:"Unable to obtain the ORTC library from the address specified."},ORTC_UNAVAILABLE:{type:"ORTCError",message:"Connection {id}: ORTC client is not created yet."},ORTC_DISCONNECTED:{type:"ORTCError",message:"Connection {id}: Disconnect not possible. ORTC client is not connected."},ORTC_EXCEPTION:{type:"ORTCError",message:"An unexpected problem occured on the Connection {id}. {message}"},TAG_NOT_CREATED:{type:"TagError",message:"A problem occured while trying to create a {className} Tag with id {id}. {message}"},TAG_INACTIVE:{type:"TagError",message:"Tried to perform an action on a {className} with {id} which is not active."},TAG_UNREGISTERED:{type:"TagError",message:"The specified Tag does not exist in the registered tags namespace."},TAG_INVALID_CONFIG:{type:"TagError",message:"Unable to register a Tag with the specified configuration. {message}"},TAG_ABSTRACT:{type:"TagError",message:"The specified tag {tag} should not be instantiated."},TAG_ACTION_UNDEFINED:{type:"TagError",message:"Tried to perform an action {action} which is not defined on a {className} with id {id}."},TAG_NOT_FOUND:{type:"TagError",message:"Unable to find a Tag with the specified id: {id}."},TAG_PROCESS:{type:"TagError",message:"An error ocurred while processing the arrived message on a {className} with id {id}. {message}"},INVALID_MESSAGE:{type:"MessageError",message:"Tried to create a message with invalid properties. {message}"},TRIGGER_UNREGISTERED:{type:"MessageError",message:"A message arrived containing a trigger which is not registered by any Tag."},STORAGE_CONNECTION_UNAVAILABLE:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} could not find a connection with connectionId: {connectionId}"},STORAGE_UNAVAILABLE:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} is not available."},STORAGE_SESSION:{type:"StorageError",message:"The Remote Storage component for a {className} provider with id {id} was not able to get a session. {message}"},STORAGE_ACTION_UNDEFINED:{type:"StorageError",message:"Tried to perform an action which is not defined on a {className} with id {id}."},STORAGE_PERMISSIONS:{type:"StorageError",message:"Tried to perform an action for which the {className} with id {id} does not have the necessary permissions. Were the right channel permissions set on the server-side?"},STORAGE_OPERATION_TIMEOUT:{type:"StorageError",message:"The Storage operation with the id: {opId} was not completed whithin the expected timeout: {timeout}"},STORAGE_CALLBACK_FAILURE:{type:"StorageError",message:"The Storage operation with the id: {opId} callback has failed. {message}"},REQUEST_FAILURE:{type:"RequestError",message:"An error occured while calling the specified address. {message}"},REQUEST_UNAVAILABLE:{type:"RequestError",message:"Unable to obtain a response from the specified address."},REQUEST_UNSUPPORTED:{type:"RequestError",message:"This browser does not support XMLHttpRequest neither XDomainRequest."},JSON_PARSE:{type:"ParseError",message:"Unable to parse the specified String according to JSON specification rules. {message}"},DOM_PARSE:{type:"ParseError",message:"Unable to parse an XRTML DOM Node. "},MISSING_ARGUMENT:{type:"MethodError",message:"A method {methodName} was called but the required argument {argument} was undefined."},INVALID_ARGUMENT:{type:"MethodError",message:"The method {methodName} was called but the argument {argument} was of an invalid type. The expected type was {expectedType}"},UNEXPECTED:{type:"UnexpectedError",message:"An unexpected error occured. Cause error message is: {message}"},FATAL:{type:"FatalError",message:"A critical error occured. The error message is: {message}"},INVALID_DOM_ATTRIBUTE:{type:"InvalidDomAttribute",message:"An error occured when trying to retrive an unexisting attribute: {attribute}"},TEMPLATING:{type:"TemplateError",message:"An error occured when trying to apply bindings to a template. The cause is: {message}"},TEMPLATING_EFFECTS:{type:"TemplateError",message:"An error occured when trying to run effects binded in a template. Are the effects configured in the tag? The error cause is: {message}"},UNEXPECTEDMEDIA:{type:"UnexpectedMediaError",message:"An error occurred when trying to operate on media. The cause is: {message}"},UNEXPECTEDEVENT:{type:"UnexpectedEventError",message:'An error occurred when trying to process the "{eventType}" event handler. The cause is: {message}'},MISSING_LIBRARY:{type:"MissingLibrary",message:"A required library {library} {module} is not available. Please import this library."}};var d=function(h){var i=[];i.push(h.name+": "+h.message+"\n");function g(j,k,n,q){var m=[];for(var l=0;l<n;l++){m.push(" ")}var o=m.join("");if(q<9){for(var p in j){if(j.hasOwnProperty(p)&&p!="name"&&p!="message"){if(typeof j[p]==="string"||typeof j[p]==="number"||typeof j[p]==="boolean"){k.push((o+p+": "+j[p])+"\n")}else{if(b.Common.Object.isObject(j[p])){k.push(o+p+": \n");g(j[p],k,n+4,q+1)}else{if(b.Common.Array.isArray(j[p])){k.push(o+p+": \n");for(var l=0;l<j[p].length;l++){g(j[p],k,n+4,q+1)}}}}}}}else{k.push(o+j.toString()+"\n")}}g(h,i,0,1);b.Console.error(i.join(""))}})(b.Error=b.Error||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.contains=function(h){var k=h.items;for(var j=0,l=k.length;j<l;j++){if(b.Common.Object.equals({o1:k[j],o2:h.obj})){return true}}return false};f.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"}})(b.Common.Array=b.Common.Array||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.equals=function(h){return b.JSON.stringify(h.o1)===b.JSON.stringify(h.o2)};f.isObject=function(h){return""+h=="[object Object]"};f.insensitiveGetter=function(h,j){for(var i in h){if(h.hasOwnProperty&&h.hasOwnProperty(i)&&(j+"").toLowerCase()==(i+"").toLowerCase()){return h[i];break}}};f.keys=window.Object.keys||function(j){var i=[],h;for(h in j){if(window.Object.prototype.hasOwnProperty.call(j,h)){i.push(h)}}return i}})(b.Common.Object=b.Common.Object||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.trim=function(h){return typeof window.String.prototype.trim=="function"?h.trim():h.replace(/^\s+|\s+/g,"")};f.template=function(j,k){for(var h in k){var i=new RegExp("\\{"+h+"\\}","gm");j=j.replace(i,k[h])}return j}})(b.Common.String=b.Common.String||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,h){var g=function(j,i){var k=document.createElement("script");k.type="text/javascript";if(k.readyState){k.onreadystatechange=function(){if(k.readyState=="loaded"||k.readyState=="complete"){k.onreadystatechange=null;i.apply(this,arguments)}}}else{k.onload=function(){i.apply(this,arguments)}}k.src=j;document.getElementsByTagName("head")[0].appendChild(k)};f.loadScript=function(i){g(i.url,i.callback)};f.loadScripts=function(j,l){if(b.Common.Array.isArray(j)){var k=[];for(var m=0;m<j.length;m++){(function(i){k.push(function(n){g(i,function(){n()})})})(j[m])}b.Async.parallel(k,function(){l()})}else{g(j,l)}};f.getStyle=function(i){if(document.defaultView&&document.defaultView.getComputedStyle){return document.defaultView.getComputedStyle(i.element,"").getPropertyValue(i.rule)}if(i.element.currentStyle){var j=i.rule.replace(/\-(\w)/g,function(l,k){return k.toUpperCase()});return i.element.currentStyle[j]}return""}})(b.Common.DOM=b.Common.DOM||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(g,i){g.post=function(l){l.method="POST";h(l)};g.get=function(l){l.method="GET";if(l.data!="undefined"){var p=l.url,m=l.data;p+=p.indexOf("?")==-1?"?":"&";for(var n in l.data){var o=m[n];if(typeof o!="object"&&typeof o!="boolean"){p+=n+"="+o+"&"}}if(p.lastIndexOf("&")==p.length-1){p=p.slice(0,-1)}l.url=p}h(l)};var h=function(l){var m=f(l).create(l.method.toLowerCase(),l.url,b.Common.Function.proxy(function(o,n,p){if(typeof n!="undefined"&&n!=null){if(l.error){l.error(n)}}else{if(l.success){l.success(o)}}if(l.complete){l.complete(o,n,p)}},this),l.async,l.headers);m.send(l.data?l.data:null)},f=function(l){if(window.XMLHttpRequest&&(!l.crossDomain||"withCredentials" in k().getNativeObject())){return k()}else{if(window.XDomainRequest){return j()}else{b.Error.raise({code:b.Error.Codes.REQUEST_UNSUPPORTED,info:{className:"xRTML.Common.Request",methodName:"getRequestType (internal method, no docs available)"}})}}},k=function(){return{getNativeObject:function(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(l){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(l){}try{return ActiveXObject("Microsoft.XMLHTTP")}catch(l){}}}b.Error.raise({code:b.Error.Codes.REQUEST_UNSUPPORTED,info:{className:"xRTML.Common.Request.XHR (internal class, no docs available)",methodName:"getNativeObject (internal method, no docs available)"}})},create:function(o,r,m,l,n){var q=this;q.xhr=this.getNativeObject();q.callback=m;o=o.toUpperCase();q.xhr.onreadystatechange=function(){try{if(this.readyState==4){if(this.status==200){q.callback(this.responseText,null,this.status)}else{if(this.status==0){q.callback(null,"The status code is 0 which likely means that the server is unavailable.",this.status)}else{q.callback(null,this.responseText,this.status)}}}}catch(s){b.Console.error(s)}};q.xhr.open(o,r,!!l?l:true);if(n){for(var p in n){q.xhr.setRequestHeader(p,n[p])}}else{q.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");q.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")}return q},send:function(l){if(l&&typeof(l)!="string"){l=b.JSON.stringify(l)}b.Console.debug("Performing request with payload: "+l);this.xhr.send(l)}}},j=function(){return{create:function(o,q,m,l){var p=this;p.xdr=new XDomainRequest();p.callback=m;o=o.toUpperCase();p.xdr.onload=function(){try{p.callback(p.xdr.responseText)}catch(r){b.Error.raise({code:b.Error.Codes.UNEXPECTED,info:{message:r.message,className:"xRTML.Common.Request.XDR (internal class, no docs available)",methodName:"onload (internal method, no docs available)"}})}};p.xdr.onerror=function(){try{p.callback(null,p.xdr.responseText)}catch(r){b.Error.raise({code:b.Error.Codes.UNEXPECTED,info:{message:r.message,className:"xRTML.Common.Request.XDR (internal class, no docs available)",methodName:"onerror (internal method, no docs available)"}})}};p.xdr.open(o,q,!!l?l:true);try{p.xdr.contentType="text/plain"}catch(n){}return p},send:function(l){var m=this;function n(o){if(o&&typeof(o)!="string"){o=b.JSON.stringify(o)}b.Console.debug("Performing request with payload: "+o);m.xdr.send(o);if(m.xdrTimeout){clearTimeout(m.xdrTimeout);m.xdrTimeout=i}}if(m.xdrReady){n(l)}else{m.xdrTimeout=setTimeout(function(){n(l)},200)}}}}})(b.Common.Request=b.Common.Request||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.setCookie=function(h){var i=h.name+"="+escape(h.value);if(h.expires){i+="; expires="+h.expires.toGMTString()}if(h.path){i+="; path="+escape(h.path)}else{i+="; path=/"}if(h.domain){i+="; domain="+escape(h.domain)}if(h.secure){i+="; secure"}document.cookie=i};f.getCookie=function(h){var i=document.cookie.match("(^|;) ?"+h.name+"=([^;]*)(;|$)");if(i){return(unescape(i[2]))}return g};f.deleteCookie=function(h){h.value="";h.expires=new Date("Thu, 01 Jan 1970 00:00:01 GMT");f.setCookie(h)}})(b.Common.Cookie=b.Common.Cookie||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(g,f){g.validateRequired=function(h){if(!h.target[h.prop]&&h.target[h.prop]!=0||(b.Common.Array.isArray(h.target[h.prop])&&h.target[h.prop].length<=0)){b.Error.raise({code:b.Error.Codes.MANDATORY_PROPERTY,target:h.target,info:{property:h.prop}})}}})(b.Common.Validator=b.Common.Validator||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.toBoolean=function(h){return typeof h==="undefined"?h:(/^true|1|yes$/i).test(h)};f.toNumber=function(h){if(typeof h==="undefined"){return h}if(typeof h=="number"){return h}if(typeof h=="string"){return b.Common.String.trim(h)==""?0:window.Number(h)}};f.toDate=function(k){var j=k.split(" "),h=j[0].split("-"),i=j[1].split(":");return new Date(parseInt(h[2]),parseInt(h[1])-1,parseInt(h[0]),parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),0)}})(b.Common.Converter=b.Common.Converter||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(h,g){var f=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};h.guidGenerator=function(){return(f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f())};h.idGenerator=function(){return(f()+f())}})(b.Common.Util=b.Common.Util||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){(function(f,g){f.proxy=function(i,h){if(typeof i==="function"&&typeof h==="object"){return function(){return i.apply(h,arguments)}}};f.parse=function(k){if(typeof k=="function"){return k}if(typeof k!="string"){return null}var h="",j="return "+k+"(";if(arguments.length!=1){for(var l=1;l<arguments.length;++l){h+=arguments[l]+","}h=h.substring(0,h.length-1)}j+=h+");";return new window.Function(h,j)};f.paramNames=function(h){var i=h.toString();return i.match(/\(.*?\)/)[0].replace(/[()]/gi,"").replace(/\s/gi,"").split(",")}})(b.Common.Function=b.Common.Function||{})})(b.Common=b.Common||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,h){var d={},f=function(i){for(var j in d){if(d[j].id===i){return d[j]}}return h},g={add:function(i){var j=i.connection.id;if(!this.bConnections[j]){this.bConnections[j]=[];i.connection.bind({connect:this.send})}this.bConnections[j].push(i.message)},bConnections:{},send:function(k){var m=g.bConnections[k.target.id],j=k.target;for(var l=0;l<m.length;++l){j.send(m[l])}j.unbind({connect:g.send});g.bConnections[k.target.id]=h}};c.create=function(i){i.attribute=function(j){return b.Common.Object.insensitiveGetter(this,j)};return this.add(new this.Connection(i))};c.add=function(i){if(this.getById(i.id)){throw new b.Error({code:b.Error.Codes.CONNECTION_DUPLICATE,target:i})}this.Connections.push(i.id);this.fire({connectionCreate:{connection:i}});d[i.internalId]=i;i.bind({xrtmlMessage:function(j){c.fire({xrtmlMessage:{connection:j.target,channel:j.channel,message:j.message}})},message:function(j){c.fire({message:{connection:j.target,channel:j.channel,message:j.message}})}});i.bind({dispose:function(m){var j=m.target.internalId,l=d[j];d[j]=null;delete d[j];for(var n=0,k=c.Connections,o=k.length;n<o;n++){if(k[n]===m.target.id){k.splice(n,1);break}}c.fire({connectionDispose:{connection:m.target}})}});return i};c.getById=function(i){return d[i]||f(i)};c.dispose=function(j){var i=this.getById(j);if(i){i.dispose()}else{b.Console.warn("ConnectionManager: Connection "+j+" was not found.")}};c.addChannel=function(i){var j=this.getById(i.connectionId);if(typeof j==="undefined"){j=this.getConnectionById(i.connectionId);if(j===null){b.Error.raise({code:b.Error.Codes.CONNECTION_NOT_FOUND,target:this,info:{className:"xRTML.ConnectionManager",methodName:"addChannel"}})}}j.createChannel(i)};c.sendMessage=function(l){var j=null;for(var k=0;k<l.connections.length;++k){j=this.getById(l.connections[k]);if(j){if(j.isConnected()){j.send(l)}else{g.add({connection:j,message:{channel:l.channel,content:l.content,sendOnly:l.sendOnly}});b.Console.debug("ConnectionManager: Connection with id "+l.connections[k]+" is not connected. Buffering message:");b.Console.debug(l)}}else{b.Error.raise({code:b.Error.Codes.CONNECTION_NOT_FOUND,target:this,info:{className:"xRTML.ConnectionManager",methodName:"sendMessage"}})}}};c.Connections=[];b.Event.extend(c)})(b.ConnectionManager=b.ConnectionManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){c.Connection=function(g){var m=null,f=true;b.Event.extend(this);this.internalId=b.Common.Util.guidGenerator();this.id=g.attribute("id")||this.internalId;this.appKey=g.attribute("appKey");this.authToken=g.attribute("authToken");this.sendRetries=parseInt(g.attribute("sendRetries"))||5;this.sendInterval=parseInt(g.attribute("sendInterval"))||1000;this.timeout=g.attribute("timeout")||b.Config.connectionTimeout;this.connectAttempts=g.attribute("connectAttempts")||b.Config.connectionAttempts;this.connectionAttemptsCounter=0;this.autoConnect=typeof g.attribute("autoConnect")=="undefined"?true:b.Common.Converter.toBoolean(g.attribute("autoConnect"));this.metadata=g.attribute("metadata");this.serverType=g.attribute("serverType")||"IbtRealTimeSJ";this.url=g.attribute("url")||b.Console.error("Connection "+this.id+": ORTC Server URL must be set.");this.isCluster=typeof g.attribute("isCluster")=="undefined"?true:b.Common.Converter.toBoolean(g.attribute("isCluster"));this.announcementSubChannel=g.attribute("announcementSubChannel");this.heartbeatActive=typeof g.attribute("heartbeatActive")=="undefined"?b.Config.heartbeatActive:b.Common.Converter.toBoolean(g.attribute("heartbeatActive"));this.heartbeatFails=typeof g.attribute("heartbeatFails")=="undefined"?b.Config.heartbeatFails:b.Common.Converter.toBoolean(g.attribute("heartbeatFails"));this.heartbeatTime=typeof g.attribute("heartbeatTime")=="undefined"?b.Config.heartbeatTime:b.Common.Converter.toBoolean(g.attribute("heartbeatTime"));this.channels={};var p=b.Common.Function.parse,n=b.Common.Function.proxy;this.messageAdapter=p(g.attribute("messageAdapter"),"message");this.bind({create:p(g.attribute("onCreate"),"e"),connect:p(g.attribute("onConnect"),"e"),channelCreate:p(g.attribute("onChannelCreate"),"e"),disconnect:p(g.attribute("onDisconnect"),"e"),subscribe:p(g.attribute("onSubscribe"),"e"),unsubscribe:p(g.attribute("onUnsubscribe"),"e"),exception:p(g.attribute("onException"),"e"),reconnect:p(g.attribute("onReconnect"),"e"),reconnecting:p(g.attribute("onReconnecting"),"e"),message:p(g.attribute("onMessage"),"e"),dispose:p(g.attribute("onDispose"),"e"),xrtmlMessage:p(g.attribute("onXrtmlMessage"),"e")});var l=n(function(q,i,r){this.process({channel:i,message:r})},this),k=function(i){m=i.createClient();m.setId(this.internalId);m.setConnectionTimeout(this.timeout);m.setConnectionMetadata(typeof this.metadata=="object"?b.JSON.stringify(this.metadata):this.metadata);if(typeof m.setHeartbeatActive!="undefined"){m.setHeartbeatActive(this.heartbeatActive);m.setHeartbeatFails(this.heartbeatFails);m.setHeartbeatTime(this.heartbeatTime)}else{if(this.heartbeatActive){b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}m.setAnnouncementSubChannel(this.announcementSubChannel);!this.isCluster?m.setUrl(this.url):m.setClusterUrl(this.url);m.onConnected=n(function(s){for(var r in this.channels){var q=this.channels[r];if(q.subscribe){s.subscribe(q.name,q.subscribeOnReconnect,l)}}this.fire({connect:{}})},this);m.onDisconnected=n(function(q){this.fire({disconnect:{}})},this);m.onSubscribed=n(function(r,q){this.channels[q].fire({subscribe:{}});this.fire({subscribe:{channel:q}})},this);m.onUnsubscribed=n(function(r,q){var s=this.channels[q];delete this.channels[q];s.fire({unsubscribe:{}});this.fire({unsubscribe:{channel:q}})},this);m.onException=n(function(r,q){this.fire({exception:{message:q}});b.Error.raise({code:b.Error.Codes.ORTC_EXCEPTION,target:this,info:{className:"ORTCClient",methodName:"onException",message:q}})},this);m.onReconnected=n(function(q){this.connectionAttemptsCounter=0;this.fire({reconnect:{}})},this);m.onReconnecting=n(function(q){if(this.connectionAttemptsCounter>=this.connectAttempts){q.disconnect()}else{this.connectionAttemptsCounter++;this.fire({reconnecting:{}})}},this);this.fire({create:{}});if(this.autoConnect){m.connect(this.appKey,this.authToken)}};var o=function(i,q){if(this.isCreated()&&this.isConnected()){this.send(i)}else{if(++q<=this.sendRetries){setTimeout(n(function(){n(o,this)(i,q)},this),this.sendInterval);b.Console.debug("Message "+i.content+" not sent to channel "+i.channel+". Retry "+q+"/"+this.sendRetries+" in "+this.sendInterval/1000+" seconds.")}else{b.Console.debug("Message "+i.content+" not sent to channel "+i.channel+". Discarding message.")}}};this.active=function(i){if(!i){return f}f=b.Common.Converter.toBoolean(i);return f};this.dispose=function(){if(this.isConnected()){this.disconnect()}this.fire({dispose:{}})};this.createChannel=function(i){i.attribute=function(r){return b.Common.Object.insensitiveGetter(this,r)};var q={connectionId:i.attribute("connectionId")||this.id,name:i.attribute("name"),subscribeOnReconnect:typeof i.attribute("subscribeOnReconnect")=="undefined"?true:b.Common.Converter.toBoolean(i.attribute("subscribeOnReconnect")),subscribe:typeof i.attribute("subscribe")=="undefined"?true:b.Common.Converter.toBoolean(i.attribute("subscribe")),messageAdapter:p(i.attribute("messageAdapter","message"))};b.Event.extend(q);q.bind({message:p(i.attribute("onMessage"),"e"),subscribe:p(i.attribute("onSubscribe"),"e"),unsubscribe:p(i.attribute("onUnsubscribe"),"e"),xrtmlMessage:p(i.attribute("onXrtmlMessage"),"e")});this.channels[i.name]=q;this.fire({channelCreate:{channel:q}});return q};this.process=function(q){var i=q.channel,r=q.message;if(r.substring(0,15)=="_X_SEND_ONLY_X_"){if(this.internalId==r.substring(15,51)){return}r=r.substring(54)}if(this.active()){b.Async.series([b.Common.Function.proxy(function(s){if(this.messageAdapter){try{r=this.messageAdapter(r)}catch(t){b.Error.raise({code:b.Error.Codes.CONNECTION_ADAPT,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"process",originalMessage:r,message:t.message}})}}s()},this),b.Common.Function.proxy(function(s){this.fire({message:{channel:i,message:r}});s()},this),b.Common.Function.proxy(function(s){if(b.MessageManager.isValid(r)){this.fire({xrtmlMessage:{message:b.MessageManager.toJson(r).xrtml,channel:i}})}s()},this)]);if(this.channels[i]){b.Async.series([b.Common.Function.proxy(function(s){if(this.channels[i].messageAdapter){try{r=this.channels[i].messageAdapter(r)}catch(t){b.Error.raise({code:b.Error.Codes.CONNECTION_ADAPT,target:this.channels[i],info:{className:"xRTML.ConnectionManager.Channel",methodName:"process",originalMessage:r,message:t.message}})}}s()},this),b.Common.Function.proxy(function(s){this.channels[i].fire({message:{message:r}});s()},this),b.Common.Function.proxy(function(s){if(b.MessageManager.isValid(r)){this.channels[i].fire({xrtmlMessage:{message:b.MessageManager.toJson(r).xrtml}})}s()},this)])}}else{b.Console.debug("Connection "+this.id+" : Not active. Message received wasn't processed.")}};this.send=function(i){var q=i.channel,r=i.content;if(this.isCreated()&&this.isConnected()){if(this.active()){var s=typeof r==="object"?r.stringify():r;if(i.sendOnly){s="_X_SEND_ONLY_X_"+this.internalId+"_X_"+s}m.send(q,s);b.Console.debug("Connection "+this.id+": Message sent to channel "+q);b.Console.debug(r)}else{b.Console.debug("Connection "+this.id+": Not active. Message not sent to channel "+q);b.Console.debug(r)}}else{setTimeout(n(function(){n(o,this)(i,0)},this),this.sendInterval);b.Console.debug("Connection "+this.id+": Not ready. Message not sent to channel "+q+". Retrying in "+this.sendInterval/1000+" seconds.");b.Console.debug(r)}return};this.connect=function(i){if(this.isCreated()){if(i){this.appKey=i.appKey;this.authToken=i.authToken}m.connect(this.appKey,this.authToken)}else{b.Error.raise({code:b.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"connect"}})}};this.disconnect=function(){this.isConnected()?m.disconnect():b.Error.raise({code:b.Error.Codes.ORTC_DISCONNECTED,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"disconnect"}})};this.subscribe=function(i){if(!this.channels[i.name]){i=this.createChannel(i)}m.subscribe(this.channels[i.name].name,this.channels[i.name].subscribeOnReconnect,l)};this.unsubscribe=function(i){m.unsubscribe(i)};this.isCreated=function(){return m!=null};this.isConnected=function(){return this.isCreated()?m.getIsConnected():false};this.isSubscribed=function(i){return this.isConnected()?m.isSubscribed(i):false};this.getMetadata=function(){if(this.isCreated()){try{return b.JSON.parse(m.getConnectionMetadata())}catch(i){return m.getConnectionMetadata()}}else{b.Error.raise({code:b.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getMetadata"}})}};this.setMetadata=function(i){return this.isCreated()?m.setConnectionMetadata(typeof i=="object"?b.JSON.stringify(i):i):b.Error.raise({code:b.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"setMetadata"}})};this.getAnnouncementSubChannel=function(){return this.isCreated()?m.getAnnouncementSubChannel():b.Error.raise({code:b.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getAnnouncementSubChannel"}})};this.getProtocol=function(){return this.isConnected()?m.getProtocol():b.Error.raise({code:b.Error.Codes.ORTC_UNAVAILABLE,target:this,info:{className:"xRTML.ConnectionManager.Connection",methodName:"getProtocol"}})};this.setProtocol=function(i){if(this.isCreated()){m.setProtocol(i)}};if(typeof loadOrtcFactory!="undefined"){loadOrtcFactory(this.serverType,n(k,this))}else{b.bind({ready:n(function(){n(loadOrtcFactory,this)(this.serverType,n(k,this))},this)})}this.getHeartbeatActive=function(){if(this.isCreated()){if(typeof m.getHeartbeatActive!="undefined"){return m.getHeartbeatActive()}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};this.getHeartbeatFails=function(){if(this.isCreated()){if(typeof m.getHeartbeatFails!="undefined"){return m.getHeartbeatFails()}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};this.getHeartbeatTime=function(){if(this.isCreated()){if(typeof m.getHeartbeatTime!="undefined"){return m.getHeartbeatTime()}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};this.setHeartbeatActive=function(i){if(this.isCreated()){if(typeof m.setHeartbeatActive!="undefined"){m.setHeartbeatActive(i)}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};this.setHeartbeatFails=function(i){if(this.isCreated()){if(typeof m.setHeartbeatFails!="undefined"){m.setHeartbeatFails(i)}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};this.setHeartbeatTime=function(i){if(this.isCreated()){if(typeof m.setHeartbeatTime!="undefined"){m.setHeartbeatTime(i)}else{b.Console.warn("The heartbeat feature is not available for the ORTC version loaded.")}}};if(g.attribute("channels")){var h=g.attribute("channels");for(var j=0;j<h.length;++j){this.createChannel(h[j])}}}})(b.ConnectionManager=b.ConnectionManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(d,g){var f={},c=function(h){for(var i in f){if(f[i].id===h){return f[i]}}b.Console.warn("Storage with id: "+h+" was not found.");return g};d.create=function(h){try{var k=new d[h.type||"KeyValuePairStorage"](),j=d.BaseStorage.extend(k);h.attribute=function(l){return b.Common.Object.insensitiveGetter(h,l)};j=new j(h);j.bind({dispose:function(m){var n=m.target.internalId,l=f[n];f[n]=null;delete f[n];d.fire({storagedispose:{storage:m.target}})}});f[j.internalId]=j;d.fire({storagecreate:{storage:j}});return j}catch(i){b.Error.raise({code:b.Error.Codes.UNEXPECTED,info:{message:i.message,className:"xRTML.StorageManager",methodName:"create"}})}};d.getById=function(h){return f[h]||c(h)};b.Event.extend(d)})(b.StorageManager=b.StorageManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(d,f){var c=function(){this.init=function(h){b.Event.extend(this);this.internalId=b.Common.Util.guidGenerator();this.id=h.attribute("id")||this.internalId;this.type=h.attribute("type")||"KeyValuePairStorage";this.isReady=false;var g=h.attribute("autoConnect");this.autoConnect=typeof g!="undefined"?b.Common.Converter.toBoolean(g):true;this.dispose=function(){this.fire({dispose:{}})};this.bind({ready:b.Common.Function.parse(h.attribute("onready")),exception:b.Common.Function.parse(h.attribute("onexception"))})}};d.BaseStorage=b.Class.extend(new c())})(b.StorageManager=b.StorageManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(d,f){var c=function(){this.init=function(o){this._super(o);var n=o.attribute("baseUrl");this.baseUrl=!!n?(n[n.length-1]=="/"?n.substring(0,(n.length-1)):n):null;b.Common.Validator.validateRequired({target:this,prop:"baseUrl"});this.connectionId=o.attribute("connectionId");this.sessionId=o.attribute("sessionId");var p=o.attribute("operationsTimeout");this.operationsTimeout=!!p?p:2000;this.bind({session:b.Common.Function.parse(o.attribute("onsession"))});if(this.autoConnect){this.openConnection()}};var j={};var m=[];var g={get:"readRequestChannel",set:"writeRequestChannel",del:"writeRequestChannel",incr:"writeRequestChannel"};var h={readRequestChannel:f,readResponseChannel:f,writeRequestChannel:f,writeResponseChannel:f};var i;this.set=function(o,n){k.call(this,{data:o,action:"set",callback:n})};this.del=function(o,n){k.call(this,{data:o,action:"del",callback:n})};this.incr=function(o,n){k.call(this,{data:o,action:"incr",callback:n})};this.get=function(o,n){k.call(this,{data:o,action:"get",callback:n})};var k=function(q){if(this.isReady){var p=b.Common.Util.guidGenerator();j[p]={callback:q.callback,timeout:setTimeout(b.Common.Function.proxy(function(){b.Error.raise({code:b.Error.Codes.STORAGE_OPERATION_TIMEOUT,target:this,info:{opId:p,timeout:this.operationsTimeout,className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"performRemoteDataOperation (internal method, no docs available)"}})},this),this.operationsTimeout)};var n=q.data;n.namespaceExpire=n.namespaceExpire||31556926;n.opId=p;var o=b.MessageManager.create({action:q.action,data:n,senderId:this.internalId});i.send({channel:h[g[q.action]],content:o})}else{m.push(q);b.Console.warn("Storage operation placed in buffer. Will only be called when the Storage is ready.")}};var l=function(q){var o=q.data;var p=o.opId;o.opId=null;delete o.opId;var n={success:q.success,data:q.success?o:null,error:!q.success?q.data.error:null};if(j[p]&&j[p].callback){j[p].callback(n)}clearTimeout(j[p].timeout);j[p]=null;delete j[p]};this.getSession=function(n){b.Common.Request.post({url:this.baseUrl+"/getStorageSession",data:n,crossDomain:true,success:b.Common.Function.proxy(function(q){var p;try{p=b.JSON.parse(q)}catch(o){b.Error.raise({code:b.Error.Codes.JSON_PARSE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"getSession",message:o.message}})}this.sessionId=p.sessionId;this.fire({session:{sessionId:this.sessionId}});if(n.autoConnect){this.openConnection()}},this),error:b.Common.Function.proxy(function(o){b.Error.raise({code:b.Error.Codes.STORAGE_SESSION,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"getSession",message:o}})},this)})};this.openConnection=function(){if(this.sessionId){b.Common.Request.post({url:this.baseUrl+"/openStorageConnection",data:{sessionId:this.sessionId},crossDomain:true,success:b.Common.Function.proxy(function(t){var s;try{s=b.JSON.parse(t)}catch(r){b.Error.raise({code:b.Error.Codes.JSON_PARSE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection",message:r.message}})}h.readRequestChannel=s.channels.readRequestChannel;h.readResponseChannel=s.channels.readResponseChannel;h.writeRequestChannel=s.channels.writeRequestChannel;h.writeResponseChannel=s.channels.writeResponseChannel;if(!!this.connectionId){i=b.ConnectionManager.getById(this.connectionId)}else{var o={appKey:s.appKey,authToken:s.authToken,url:s.url,isCluster:s.isCluster,serverType:s.serverType};i=b.ConnectionManager.create(o)}function p(u){u.bind({xrtmlMessage:b.Common.Function.proxy(function(x){if(x.channel==h.readResponseChannel||x.channel==h.writeResponseChannel){var y=x.message;l.call(this,{success:y.action=="exception"?false:true,data:y.data})}},this)});var v=false;var w=false;u.bind({subscribe:b.Common.Function.proxy(function(x){if(x.channel==h.readResponseChannel){v=true}if(x.channel==h.writeResponseChannel){w=true}if(v&&w){this.isReady=true;for(var y=0,z=m.length;y<z;y++){k.call(this,m[y])}m=[];this.fire({ready:{}})}},this)});u.subscribe({name:h.readResponseChannel});u.subscribe({name:h.writeResponseChannel})}if(i.isConnected()){p.call(this,i)}else{if(i.autoConnect){i.bind({connect:b.Common.Function.proxy(function(u){p.call(this,u.target)},this)})}else{i.bind({connect:b.Common.Function.proxy(function(u){p.call(this,u.target)},this)});function q(u){if(!u.appKey&&!u.authToken){u.appKey=s.appKey;u.authToken=s.authToken}u.connect()}if(i.isCreated()){q.call(this,i)}else{i.bind({create:b.Common.Function.proxy(function(u){q.call(this,u.target)},this)})}}}},this),error:b.Common.Function.proxy(function(o){b.Error.raise({code:b.Error.Codes.REQUEST_FAILURE,target:this,info:{className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection",message:o}})},this)})}else{i=b.ConnectionManager.getById(this.connectionId);if(!!i){var n={appKey:i.appKey,serverUrl:i.url,isCluster:i.isCluster,serverType:i.serverType,timeToLive:900,authenticate:false,autoConnect:true};this.getSession(n)}else{b.Error.raise({code:b.Error.Codes.STORAGE_CONNECTION_UNAVAILABLE,target:this,info:{connectionId:this.connectionId,className:"xRTML.StorageManager.KeyValuePairStorage",methodName:"openConnection"}})}}}};d.KeyValuePairStorage=c})(b.StorageManager=b.StorageManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(k,m){var j={},l={},d=null,g=function(n){for(var o in j){if(j[o].id===n){return j[o]}}b.Console.log("Tag with id: "+n+" was not found.");return m},f=function(o){if(o.base!="Tag"){var n=f(new l[o.base]());o=n.extend(o)}else{o=d.extend(o)}return o},c=function(n){return b.Common.Object.insensitiveGetter(this,n)},i=[];if(!b.domLoaded()){function h(){var n;for(var o=0;o<i.length;++o){n=i[o];b.Console.debug("TagManager: Creating a "+n.tagObject.name+" tag after the HTML page has been fully loaded.");b.TagManager.create(n.tagObject,n.fn)}i=[];b.Event.unbind(window,{load:h})}b.Event.bind(window,{load:h})}k.register=function(o){var n=o.name;if(n){if(n!="Tag"){if(!l[n]){if(!o.base){o.base="Tag"}l[n]=o.struct;l[n].prototype.base=o.base;l[n].prototype.name=o.name;l[n].prototype.decorators=o.decorators;l[n].prototype["abstract"]=o["abstract"]||false;l[n].prototype.resources=o.resources||{}}}else{d=o.struct}}else{b.Error.raise({code:b.Error.Codes.TAG_INVALID_CONFIG,target:this,info:{message:"Please provide the tag name.",className:"xRTML.TagManager",methodName:"register"}})}};k.create=function(q,o){try{if((q.target||q.template)&&!b.domLoaded()){i.push({tagObject:q,fn:o});b.Console.debug("TagManager: Creating a "+q.name+" tag was postponed until HTML page has been fully loaded.");return}q.attribute=c;if(!l[q.name]){throw b.Error.raise({code:b.Error.Codes.TAG_UNREGISTERED,info:{tagName:q.name,className:"xRTML.TagManager",methodName:"create"}})}var p=new l[q.name]();if(!!p["abstract"]){throw b.Error.raise({code:b.Error.Codes.TAG_ABSTRACT,target:this,info:{tag:p,className:"xRTML.TagManager",methodName:"create"}})}var r=p.base=="Tag"?d.extend(p):f(p);r=new r(q,function(s){j[s.internalId]=s;k.fire({tagCreate:{tag:s}});b.Async.series([function(t){s.fire({postInit:{}});s.bind({dispose:function(v){var w=v.target.internalId;var u=j[w];j[w]=null;delete j[w];k.fire({tagDispose:{tag:v.target}})}});t()},function(t){if(o){o(s);t()}}])})}catch(n){b.Error.raise({code:b.Error.Codes.TAG_NOT_CREATED,target:this,info:{id:q.id,className:"xRTML.TagManager."+q.name,methodName:"init",message:n.message,tagConfig:q}})}};k.getById=function(n){return j[n]||g(n)};k.getClasses=function(){var o=[];for(var n in l){o.push(n)}return o};b.Event.extend(k);b.DomParser.bind({tagsLoad:function(n){var p=n.tags;for(var o=0;o<p.length;++o){k.create(p[o])}}});k.registerResources=function(n){var p=l[n.tag];if(p){for(var o=0;o<n.resources.length;o++){p.prototype.resources[n.resources[o].name.toLowerCase()]=n.resources[o].src}}};k.unregisterResources=function(n){var p=l[n.tag];if(p){for(var o=0;o<n.resources.length;o++){if(p.prototype.resources[n.resources[o].name.toLowerCase()]){p.prototype.resources[n.resources[o].name.toLowerCase()]=null;delete p.prototype.resources[n.resources[o].name.toLowerCase()]}}}}})(b.TagManager=b.TagManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){b.TagManager.register({name:"Tag","abstract":true,struct:b.Class.extend(new function(){this.init=function(f){b.Event.extend(this);var g=b.Common.Function.parse;this.bind({preInit:g(f.attribute("onPreInit")),postInit:g(f.attribute("onPostInit")),active:g(f.attribute("onActive")),preProcess:g(f.attribute("onPreProcess")),postProcess:g(f.attribute("onPostProcess")),dispose:g(f.attribute("onDispose"))});this.fire({preInit:{}});this.internalId=b.Common.Util.guidGenerator();this.id=f.attribute("id")||this.internalId;this.connections=f.attribute("connections")||[];this.channelId=f.attribute("channelId");this.triggers=f.attribute("triggers")||[];this.receiveOwnMessages=!!f.attribute("receiveOwnMessages");var d=f.attribute("resources")||[];for(var c=0;c<d.length;c++){this.resources[d[c].name.toLowerCase()]=d[c].src}this.target=(function(){var h=b.Sizzle(f.attribute("target"));if(h.length==0){h.push(document.body)}return h})();this.template=f.attribute("template");this.active=f.attribute("active")?b.Common.Converter.toBoolean(f.attribute("active")):true;this.storage=f.attribute("storage");if(!this.storage){this.storageId=f.attribute("storageId");this.storageKey=f.attribute("storageKey");if(this.storageId||this.storageKey){this.storage={id:this.storageId,key:this.storageKey||""}}}else{if(!this.storage.key){this.storage.key=""}this.storageId=this.storage.id;this.storageKey=this.storage.key}};this.activate=function(c){this.active=b.Common.Converter.toBoolean(c.active);this.fire({active:{value:this.active}})};this.process=function(c){};this.sendMessage=function(c){b.ConnectionManager.sendMessage({connections:c.connectionId?[c.connectionId]:this.connections,channel:c.channel||this.channelId,content:b.MessageManager.create({trigger:c.trigger?[c.trigger]:this.triggers,action:c.action,data:c.data,senderId:this.internalId})})};this.dispose=function(){this.target=null;this.fire({dispose:{}})};this.registerTrigger=function(c){b.MessageBroker.registerTrigger({name:c,tagId:this.internalId});this.triggers.push(c)};this.unregisterTrigger=function(d){b.MessageBroker.unregisterTrigger({name:d,tagId:this.internalId});for(var c=0;c<this.triggers.length;c++){if(this.triggers[c]==d){this.triggers.splice(c,1)}}};this.registerResources=function(c){for(var d=0;d<c.length;d++){this.resources[c[d].name.toLowerCase()]=c[d].src}};this.unregisterResources=function(c){for(var d=0;d<c.length;d++){if(this.resources[c[d].name.toLowerCase()]){this.resources[c[d].name.toLowerCase()]=null;delete this.resources[c[d].name.toLowerCase()]}}}})})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,i){var g={},f=function(p){if(g[p.name]){for(var o in g[p.name]){var n=b.TagManager.getById(o),m=p.message;if(n.active||m.data.action=="activate"){if(n.receiveOwnMessages||!m.senderId||n.internalId!==m.senderId){var l=m.data,k=m.action;b.Async.series([function(q){n.fire({preProcess:{data:l}});q()},function(q){if(k){if(n[k]){n[k].call(n,l);n.fire({process:{data:l,action:k}});return q()}else{b.Console.warn("Tried to perform an action "+k+" which is not defined on a "+n.name+" with id "+n.id+".")}}n.process(l);n.fire({process:{data:l}});q()},function(q){n.fire({postProcess:{data:l}});q()}])}}else{b.Error.raise({code:b.Error.Codes.TAG_INACTIVE,target:n,className:"xRTML.MessageBroker",methodName:"triggerCall (internal method, no docs available)"})}}}else{b.Console.log("Trigger "+p.name+" is not registered with any xRTML Tag.")}},d=function(k){var m=k.tag,n;for(var l=0;l<m.triggers.length;++l){n=m.triggers[l];c.registerTrigger({tagId:m.internalId,name:n})}},j=function(k){var m=k.tag,n;for(var l=0;l<m.triggers.length;++l){n=m.triggers[l];c.unregisterTrigger({tagId:m.internalId,name:n})}},h=function(k){var m=k.message.trigger;if(typeof m=="string"){f({name:m,message:k.message})}else{if(m instanceof Array){for(var l=0;l<m.length;++l){k.message.trigger=m[l];f({name:m[l],message:k.message})}}}};c.registerTrigger=function(k){if(!g[k.name]){g[k.name]={}}g[k.name][k.tagId]=i;c.fire({triggerRegister:{trigger:k}})};c.unregisterTrigger=function(l){var k=g[l.name];if(!k){b.Console.warn("The trigger "+l.name+" is not registered.");return}if(k.hasOwnProperty(l.tagId)){delete g[l.name][l.tagId];if(!b.Common.Object.keys(k).length){delete g[l.name]}c.fire({triggerUnregister:{trigger:l}})}else{b.Console.warn("The tag "+l.tagId+" is not listening to messages with the trigger "+l.name+".")}};b.Event.extend(c);b.TagManager.bind({tagCreate:d,tagDispose:j});b.ConnectionManager.bind({xrtmlMessage:h})})(b.MessageBroker=b.MessageBroker||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(c,d){c.isValid=function(h){try{if(typeof h==="string"){var g=h.substring(h.indexOf('"'),h.indexOf('"',h.indexOf('"')+1)+1);if('"xrtml"'!=b.Common.String.trim(g)){return false}b.JSON.parse(h);return true}if((typeof h==="object")&&h.xrtml){return true}return false}catch(f){b.Error.raise({code:b.Error.Codes.INVALID_MESSAGE,target:this,message:f.message,info:{className:"xRTML.MessageManager",methodName:"isValid"}})}};c.toJson=function(g){if(typeof g==="string"&&c.isValid(g)){var f=b.JSON.parse(g).xrtml;var h={xrtml:{senderId:f.s,trigger:f.t,action:f.a,data:f.d}};return h}return g};c.stringify=function(f){var g={xrtml:{s:f.senderId,t:f.trigger,a:f.action,d:f.data&&typeof f.data!="object"?b.JSON.parse(f.data):f.data}};return b.JSON.stringify(g)};c.create=function(f){f.data=f.data&&typeof f.data!="object"?b.JSON.parse(f.data):f.data;f.stringify=function(){return c.stringify(this)};return f}})(b.MessageManager=b.MessageManager||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(f,g){var d=function(j,k){if(b.Config.remoteTrace){var h=null;try{h=b.JSON.stringify(k)}catch(i){}var l=b.MessageManager.create({data:{message:j,content:h}});b.ConnectionManager.sendMessage(b.TraceMonitor.channelId,l)}};f.channelId="trace";b.Console.bind({error:function(h){d("Error",h.error)}});b.ConnectionManager.bind({connectionCreate:function(i){var h=i.connection;d("Connection found: \n AppKey: "+h.appKey+" \n AuthToken: "+h.authToken+" \n Url: "+h.url,h);h.bind({create:function(j){var k="Connection "+j.target.id+" created. "+(j.target.autoConnect?"Connecting...":"Waiting for explicit connect...");b.Console.debug(k);d(k,j.target)},connect:function(j){var k="Connection "+j.target.id+" established. Using "+j.target.getProtocol()+" protocol.";b.Console.debug(k);d(k,j.target)},disconnect:function(j){var k="Connection "+j.target.id+" closed.";b.Console.debug(k);d(k,j.target)},subscribe:function(j){var k="Connection "+j.target.id+": Channel "+j.channel+" subscribed.";b.Console.debug(k);d(k,j.target)},unsubscribe:function(j){var k="Connection "+j.target.id+": Channel "+j.channel+" unsubscribed.";b.Console.debug(k);d(k,j.target)},exception:function(j){var k="Connection "+j.target.id+" threw an exception: "+j.event;b.Console.debug(k);d(k,j.target)},reconnect:function(j){var k="Connection "+j.target.id+" is restored. Using "+j.target.getProtocol()+" protocol.";b.Console.debug(k);d(k,j.target)},reconnecting:function(j){var k="Connection "+j.target.id+" was lost. ";if(j.target.connectionAttemptsCounter>=j.target.connectAttempts){k+="Maximum number of attempts reached: "+j.target.connectAttempts+" Stop trying to reconnect."}else{k+="Trying to reconnect. Attempt "+j.target.connectionAttemptsCounter+" out of "+j.target.connectAttempts}b.Console.debug(k);d(k,j.target)},message:function(j){var l="Connection "+j.target.id+": Message received from channel "+j.channel,m;try{m=b.JSON.parse(j.message)}catch(k){m=j.message}b.Console.debug(l);b.Console.debug(m);d(m,j.target)},xrtmlMessage:function(j){var k="Connection "+j.target.id+": xRTML Message received from channel "+j.channel;b.Console.debug(k);b.Console.debug(j.message);d(j.message,j.target)}})}});var c=function(h){var i="Tag "+h.target.id+": "+h.type+" message";b.Console.debug(i);b.Console.debug(h.data);d(i,h.data)};b.TagManager.bind({tagCreate:function(h){var i=h.tag;b.Console.debug("Tag of type "+i.name+" created with id "+(i.id||i.internalId));b.Console.debug(i);i.bind({init:function(j){b.Console.debug("")},load:function(j){b.Console.debug("")},active:function(j){b.Console.debug("")},process:c,preProcess:c,postProcess:c})},tagDispose:function(h){var j=h.tag,i="Tag of type "+h.name+" with id "+(j.id||j.internalId)+" disposed.";b.Console.debug(i);d(i,h.tag)}});b.MessageBroker.bind({triggerRegister:function(h){var i="Tag "+h.trigger.tagId+" registered trigger: "+h.trigger.name;b.Console.debug(i);d(i,h.target)},triggerUnregister:function(h){var i="Tag "+h.trigger.tagId+" unregistered trigger: "+h.trigger.name;b.Console.debug(i);d(i,h.target)}});b.DomParser.bind({configLoad:function(h){b.Console.debug("DOM Parser: the following connections were read from DOM: ");b.Console.debug(h.config.connections);b.Console.debug("DOM Parser: the following storages were read from DOM: ");b.Console.debug(h.config.storages)},tagsLoad:function(h){b.Console.debug("DOM Parser: the following tags were read from DOM: ");b.Console.debug(h.tags)}})})(b.TraceMonitor=b.TraceMonitor||{})})(window.xRTML=window.xRTML||{});(function(d,c){var b=function(){d.isReady=true;d.fire({ready:{}})};(typeof loadOrtcFactory=="undefined")?d.Config.ortcLibrary(((document.location.protocol=="file:")?"http:":document.location.protocol)+"//dfdbz2tdq3k01.cloudfront.net/js/2.1.0/ortc.js",b):b();var a=function(){d.DomParser.read();if(d.isReady){d.isLoaded=true;d.fire({load:{}})}else{d.ready(function(){d.isLoaded=true;d.fire({load:{}})})}};d.domLoaded()?a():d.Event.bind(window,{load:a})})(window.xRTML=window.xRTML||{});(function(b,a){(function(f,g){var d=(typeof window.jQuery!="undefined"&&parseFloat(window.jQuery().jquery)<1.3)?g:window.jQuery;var c=g;(function(m,i,k,j,l){var h=true;!function(n){n(c={})}(function(u){var t=typeof u!=="undefined"?u:{};t.exportSymbol=function(D,E){var G=D.split(".");var F=t;for(var C=0;C<G.length-1;C++){F=F[G[C]]}F[G[G.length-1]]=E};t.exportProperty=function(D,E,C){D[E]=C};t.version="2.2.1";t.exportSymbol("version",t.version);t.utils=new (function(){var O=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;var L={},N={};var K=/Firefox\/2/i.test(k.userAgent)?"KeyboardEvent":"UIEvents";L[K]=["keyup","keydown","keypress"];L.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var D in L){var M=L[D];if(M.length){for(var E=0,J=M.length;E<J;E++){N[M[E]]=D}}}var C={propertychange:true};var F=(function(){var R=3,P=i.createElement("div"),Q=P.getElementsByTagName("i");while(P.innerHTML="<!--[if gt IE "+(++R)+"]><i></i><![endif]-->",Q[0]){}return R>4?R:l}());var H=F===6,I=F===7;function G(P,Q){if((t.utils.tagNameLower(P)!=="input")||!P.type){return false}if(Q.toLowerCase()!="click"){return false}var R=P.type;return(R=="checkbox")||(R=="radio")}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(Q,P){for(var R=0,S=Q.length;R<S;R++){P(Q[R])}},arrayIndexOf:function(P,R){if(typeof Array.prototype.indexOf=="function"){return Array.prototype.indexOf.call(P,R)}for(var Q=0,S=P.length;Q<S;Q++){if(P[Q]===R){return Q}}return -1},arrayFirst:function(P,S,T){for(var Q=0,R=P.length;Q<R;Q++){if(S.call(T,P[Q])){return P[Q]}}return null},arrayRemoveItem:function(P,R){var Q=t.utils.arrayIndexOf(P,R);if(Q>=0){P.splice(Q,1)}},arrayGetDistinctValues:function(P){P=P||[];var S=[];for(var Q=0,R=P.length;Q<R;Q++){if(t.utils.arrayIndexOf(S,P[Q])<0){S.push(P[Q])}}return S},arrayMap:function(P,S){P=P||[];var T=[];for(var Q=0,R=P.length;Q<R;Q++){T.push(S(P[Q]))}return T},arrayFilter:function(P,S){P=P||[];var T=[];for(var Q=0,R=P.length;Q<R;Q++){if(S(P[Q])){T.push(P[Q])}}return T},arrayPushAll:function(P,S){if(S instanceof Array){P.push.apply(P,S)}else{for(var Q=0,R=S.length;Q<R;Q++){P.push(S[Q])}}return P},extend:function(R,Q){if(Q){for(var P in Q){if(Q.hasOwnProperty(P)){R[P]=Q[P]}}}return R},emptyDomNode:function(P){while(P.firstChild){t.removeNode(P.firstChild)}},moveCleanedNodesToContainerElement:function(S){var T=t.utils.makeArray(S);var P=i.createElement("div");for(var Q=0,R=T.length;Q<R;Q++){P.appendChild(t.cleanNode(T[Q]))}return P},cloneNodes:function(T,U){for(var Q=0,R=T.length,S=[];Q<R;Q++){var P=T[Q].cloneNode(true);S.push(U?t.cleanNode(P):P)}return S},setDomNodeChildren:function(Q,P){t.utils.emptyDomNode(Q);if(P){for(var R=0,S=P.length;R<S;R++){Q.appendChild(P[R])}}},replaceDomNodes:function(U,S){var T=U.nodeType?[U]:U;if(T.length>0){var Q=T[0];var V=Q.parentNode;for(var P=0,R=S.length;P<R;P++){V.insertBefore(S[P],Q)}for(var P=0,R=T.length;P<R;P++){t.removeNode(T[P])}}},setOptionNodeSelectionState:function(Q,P){if(F<7){Q.setAttribute("selected",P)}else{Q.selected=P}},stringTrim:function(P){return(P||"").replace(O,"")},stringTokenize:function(T,P){var S=[];var U=(T||"").split(P);for(var Q=0,R=U.length;Q<R;Q++){var V=t.utils.stringTrim(U[Q]);if(V!==""){S.push(V)}}return S},stringStartsWith:function(Q,P){Q=Q||"";if(P.length>Q.length){return false}return Q.substring(0,P.length)===P},domNodeIsContainedBy:function(Q,P){if(P.compareDocumentPosition){return(P.compareDocumentPosition(Q)&16)==16}while(Q!=null){if(Q==P){return true}Q=Q.parentNode}return false},domNodeIsAttachedToDocument:function(P){return t.utils.domNodeIsContainedBy(P,P.ownerDocument)},tagNameLower:function(P){return P&&P.tagName&&P.tagName.toLowerCase()},registerEventHandler:function(P,Q,R){var S=F&&C[Q];if(!S&&typeof j!="undefined"){if(G(P,Q)){var T=R;R=function(U,V){var W=this.checked;if(V){this.checked=V.checkedStateBeforeEvent!==true}T.call(this,U);this.checked=W}}j(P)["bind"](Q,R)}else{if(!S&&typeof P.addEventListener=="function"){P.addEventListener(Q,R,false)}else{if(typeof P.attachEvent!="undefined"){P.attachEvent("on"+Q,function(U){R.call(P,U)})}else{throw new Error("Browser doesn't support addEventListener or attachEvent")}}}},triggerEvent:function(P,T){if(!(P&&P.nodeType)){throw new Error("element must be a DOM node when calling triggerEvent")}if(typeof j!="undefined"){var S=[];if(G(P,T)){S.push({checkedStateBeforeEvent:P.checked})}j(P)["trigger"](T,S)}else{if(typeof i.createEvent=="function"){if(typeof P.dispatchEvent=="function"){var R=N[T]||"HTMLEvents";var Q=i.createEvent(R);Q.initEvent(T,true,true,m,0,0,0,0,0,false,false,false,false,0,P);P.dispatchEvent(Q)}else{throw new Error("The supplied element doesn't support dispatchEvent")}}else{if(typeof P.fireEvent!="undefined"){if(G(P,T)){P.checked=P.checked!==true}P.fireEvent("on"+T)}else{throw new Error("Browser doesn't support triggering events")}}}},unwrapObservable:function(P){return t.isObservable(P)?P():P},peekObservable:function(P){return t.isObservable(P)?P.peek():P},toggleDomNodeCssClass:function(S,P,T){if(P){var Q=/[\w-]+/g,R=S.className.match(Q)||[];t.utils.arrayForEach(P.match(Q),function(U){var V=t.utils.arrayIndexOf(R,U);if(V>=0){if(!T){R.splice(V,1)}}else{if(T){R.push(U)}}});S.className=R.join(" ")}},setTextContent:function(P,R){var S=t.utils.unwrapObservable(R);if((S===null)||(S===l)){S=""}if(P.nodeType===3){P.data=S}else{var Q=t.virtualElements.firstChild(P);if(!Q||Q.nodeType!=3||t.virtualElements.nextSibling(Q)){t.virtualElements.setDomNodeChildren(P,[i.createTextNode(S)])}else{Q.data=S}t.utils.forceRefresh(P)}},setElementName:function(Q,R){Q.name=R;if(F<=7){try{Q.mergeAttributes(i.createElement("<input name='"+Q.name+"'/>"),false)}catch(P){}}},forceRefresh:function(Q){if(F>=9){var P=Q.nodeType==1?Q:Q.parentNode;if(P.style){P.style.zoom=P.style.zoom}}},ensureSelectElementIsRenderedCorrectly:function(Q){if(F>=9){var P=Q.style.width;Q.style.width=0;Q.style.width=P}},range:function(R,Q){R=t.utils.unwrapObservable(R);Q=t.utils.unwrapObservable(Q);var S=[];for(var P=R;P<=Q;P++){S.push(P)}return S},makeArray:function(P){var S=[];for(var Q=0,R=P.length;Q<R;Q++){S.push(P[Q])}return S},isIe6:H,isIe7:I,ieVersion:F,getFormFields:function(R,P){var Q=t.utils.makeArray(R.getElementsByTagName("input")).concat(t.utils.makeArray(R.getElementsByTagName("textarea")));var T=(typeof P=="string")?function(V){return V.name===P}:function(V){return P.test(V.name)};var U=[];for(var S=Q.length-1;S>=0;S--){if(T(Q[S])){U.push(Q[S])}}return U},parseJson:function(P){if(typeof P=="string"){P=t.utils.stringTrim(P);if(P){if(m.JSON&&m.JSON.parse){return m.JSON.parse(P)}return(new Function("return "+P))()}}return null},stringifyJson:function(P,Q,R){if((typeof JSON=="undefined")||(typeof JSON.stringify=="undefined")){throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")}return JSON.stringify(t.utils.unwrapObservable(P),Q,R)},postJson:function(ab,P,X){X=X||{};var Z=X.params||{};var T=X.includeFields||this.fieldsIncludedWithJsonPost;var aa=ab;if((typeof ab=="object")&&(t.utils.tagNameLower(ab)==="form")){var Y=ab;aa=Y.action;for(var S=T.length-1;S>=0;S--){var Q=t.utils.getFormFields(Y,T[S]);for(var V=Q.length-1;V>=0;V--){Z[Q[V].name]=Q[V].value}}}P=t.utils.unwrapObservable(P);var R=i.createElement("form");R.style.display="none";R.action=aa;R.method="post";for(var W in P){var U=i.createElement("input");U.name=W;U.value=t.utils.stringifyJson(t.utils.unwrapObservable(P[W]));R.appendChild(U)}for(var W in Z){var U=i.createElement("input");U.name=W;U.value=Z[W];R.appendChild(U)}i.body.appendChild(R);X.submitter?X.submitter(R):R.submit();setTimeout(function(){R.parentNode.removeChild(R)},0)}}})();t.exportSymbol("utils",t.utils);t.exportSymbol("utils.arrayForEach",t.utils.arrayForEach);t.exportSymbol("utils.arrayFirst",t.utils.arrayFirst);t.exportSymbol("utils.arrayFilter",t.utils.arrayFilter);t.exportSymbol("utils.arrayGetDistinctValues",t.utils.arrayGetDistinctValues);t.exportSymbol("utils.arrayIndexOf",t.utils.arrayIndexOf);t.exportSymbol("utils.arrayMap",t.utils.arrayMap);t.exportSymbol("utils.arrayPushAll",t.utils.arrayPushAll);t.exportSymbol("utils.arrayRemoveItem",t.utils.arrayRemoveItem);t.exportSymbol("utils.extend",t.utils.extend);t.exportSymbol("utils.fieldsIncludedWithJsonPost",t.utils.fieldsIncludedWithJsonPost);t.exportSymbol("utils.getFormFields",t.utils.getFormFields);t.exportSymbol("utils.peekObservable",t.utils.peekObservable);t.exportSymbol("utils.postJson",t.utils.postJson);t.exportSymbol("utils.parseJson",t.utils.parseJson);t.exportSymbol("utils.registerEventHandler",t.utils.registerEventHandler);t.exportSymbol("utils.stringifyJson",t.utils.stringifyJson);t.exportSymbol("utils.range",t.utils.range);t.exportSymbol("utils.toggleDomNodeCssClass",t.utils.toggleDomNodeCssClass);t.exportSymbol("utils.triggerEvent",t.utils.triggerEvent);t.exportSymbol("utils.unwrapObservable",t.utils.unwrapObservable);if(!Function.prototype.bind){Function.prototype.bind=function(D){var E=this,C=Array.prototype.slice.call(arguments),D=C.shift();return function(){return E.apply(D,C.concat(Array.prototype.slice.call(arguments)))}}}t.utils.domData=new (function(){var E=0;var D="__ko__"+(new Date).getTime();var C={};return{get:function(H,G){var F=t.utils.domData.getAll(H,false);return F===l?l:F[G]},set:function(H,G,I){if(I===l){if(t.utils.domData.getAll(H,false)===l){return}}var F=t.utils.domData.getAll(H,true);F[G]=I},getAll:function(I,F){var G=I[D];var H=G&&(G!=="null")&&C[G];if(!H){if(!F){return l}G=I[D]="ko"+E++;C[G]={}}return C[G]},clear:function(G){var F=G[D];if(F){delete C[F];G[D]=null;return true}return false}}})();t.exportSymbol("utils.domData",t.utils.domData);t.exportSymbol("utils.domData.clear",t.utils.domData.clear);t.utils.domNodeDisposal=new (function(){var H="__ko_domNodeDisposal__"+(new Date).getTime();var C={1:true,8:true,9:true};var D={1:true,9:true};function I(L,K){var J=t.utils.domData.get(L,H);if((J===l)&&K){J=[];t.utils.domData.set(L,H,J)}return J}function G(J){t.utils.domData.set(J,H,l)}function F(L){var J=I(L,false);if(J){J=J.slice(0);for(var K=0;K<J.length;K++){J[K](L)}}t.utils.domData.clear(L);if((typeof j=="function")&&(typeof j.cleanData=="function")){j.cleanData([L])}if(D[L.nodeType]){E(L)}}function E(L){var J,K=L.firstChild;while(J=K){K=J.nextSibling;if(J.nodeType===8){F(J)}}}return{addDisposeCallback:function(K,J){if(typeof J!="function"){throw new Error("Callback must be a function")}I(K,true).push(J)},removeDisposeCallback:function(L,J){var K=I(L,false);if(K){t.utils.arrayRemoveItem(K,J);if(K.length==0){G(L)}}},cleanNode:function(M){if(C[M.nodeType]){F(M);if(D[M.nodeType]){var J=[];t.utils.arrayPushAll(J,M.getElementsByTagName("*"));for(var K=0,L=J.length;K<L;K++){F(J[K])}}}return M},removeNode:function(J){t.cleanNode(J);if(J.parentNode){J.parentNode.removeChild(J)}}}})();t.cleanNode=t.utils.domNodeDisposal.cleanNode;t.removeNode=t.utils.domNodeDisposal.removeNode;t.exportSymbol("cleanNode",t.cleanNode);t.exportSymbol("removeNode",t.removeNode);t.exportSymbol("utils.domNodeDisposal",t.utils.domNodeDisposal);t.exportSymbol("utils.domNodeDisposal.addDisposeCallback",t.utils.domNodeDisposal.addDisposeCallback);t.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",t.utils.domNodeDisposal.removeDisposeCallback);(function(){var D=/^(\s*)<!--(.*?)-->/;function E(G){var I=t.utils.stringTrim(G).toLowerCase(),F=i.createElement("div");var J=I.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!I.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!I.indexOf("<td")||!I.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];var H="ignored<div>"+J[1]+G+J[2]+"</div>";if(typeof m.innerShiv=="function"){F.appendChild(m.innerShiv(H))}else{F.innerHTML=H}while(J[0]--){F=F.lastChild}return t.utils.makeArray(F.lastChild.childNodes)}function C(H){if(j.parseHTML){return j.parseHTML(H)}else{var G=j.clean([H]);if(G&&G[0]){var F=G[0];while(F.parentNode&&F.parentNode.nodeType!==11){F=F.parentNode}if(F.parentNode){F.parentNode.removeChild(F)}}return G}}t.utils.parseHtmlFragment=function(F){return typeof j!="undefined"?C(F):E(F)};t.utils.setHtml=function(H,F){t.utils.emptyDomNode(H);F=t.utils.unwrapObservable(F);if((F!==null)&&(F!==l)){if(typeof F!="string"){F=F.toString()}if(typeof j!="undefined"){j(H)["html"](F)}else{var I=t.utils.parseHtmlFragment(F);for(var G=0;G<I.length;G++){H.appendChild(I[G])}}}}})();t.exportSymbol("utils.parseHtmlFragment",t.utils.parseHtmlFragment);t.exportSymbol("utils.setHtml",t.utils.setHtml);t.memoization=(function(){var E={};function F(){return(((1+Math.random())*4294967296)|0).toString(16).substring(1)}function D(){return F()+F()}function C(L,G){if(!L){return}if(L.nodeType==8){var K=t.memoization.parseMemoText(L.nodeValue);if(K!=null){G.push({domNode:L,memoId:K})}}else{if(L.nodeType==1){for(var I=0,H=L.childNodes,J=H.length;I<J;I++){C(H[I],G)}}}}return{memoize:function(G){if(typeof G!="function"){throw new Error("You can only pass a function to ko.memoization.memoize()")}var H=D();E[H]=G;return"<!--[ko_memo:"+H+"]-->"},unmemoize:function(I,H){var G=E[I];if(G===l){throw new Error("Couldn't find any memo with ID "+I+". Perhaps it's already been unmemoized.")}try{G.apply(null,H||[]);return true}finally{delete E[I]}},unmemoizeDomNodeAndDescendants:function(H,I){var L=[];C(H,L);for(var J=0,K=L.length;J<K;J++){var M=L[J].domNode;var G=[M];if(I){t.utils.arrayPushAll(G,I)}t.memoization.unmemoize(L[J].memoId,G);M.nodeValue="";if(M.parentNode){M.parentNode.removeChild(M)}}},parseMemoText:function(H){var G=H.match(/^\[ko_memo\:(.*?)\]$/);return G?G[1]:null}}})();t.exportSymbol("memoization",t.memoization);t.exportSymbol("memoization.memoize",t.memoization.memoize);t.exportSymbol("memoization.unmemoize",t.memoization.unmemoize);t.exportSymbol("memoization.parseMemoText",t.memoization.parseMemoText);t.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",t.memoization.unmemoizeDomNodeAndDescendants);t.extenders={throttle:function(C,D){C.throttleEvaluation=D;var E=null;return t.dependentObservable({read:C,write:function(F){clearTimeout(E);E=setTimeout(function(){C(F)},D)}})},notify:function(D,C){D.equalityComparer=C=="always"?function(){return false}:t.observable.fn["equalityComparer"];return D}};function n(E){var F=this;if(E){for(var D in E){var C=t.extenders[D];if(typeof C=="function"){F=C(F,E[D])}}}return F}t.exportSymbol("extenders",t.extenders);t.subscription=function(E,C,D){this.target=E;this.callback=C;this.disposeCallback=D;t.exportProperty(this,"dispose",this.dispose)};t.subscription.prototype.dispose=function(){this.isDisposed=true;this.disposeCallback()};t.subscribable=function(){this._subscriptions={};t.utils.extend(this,t.subscribable.fn);t.exportProperty(this,"subscribe",this.subscribe);t.exportProperty(this,"extend",this.extend);t.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var q="change";t.subscribable.fn={subscribe:function(D,E,F){F=F||q;var C=E?D.bind(E):D;var G=new t.subscription(this,C,function(){t.utils.arrayRemoveItem(this._subscriptions[F],G)}.bind(this));if(!this._subscriptions[F]){this._subscriptions[F]=[]}this._subscriptions[F].push(G);return G},notifySubscribers:function(D,C){C=C||q;if(this._subscriptions[C]){t.dependencyDetection.ignore(function(){t.utils.arrayForEach(this._subscriptions[C].slice(0),function(E){if(E&&(E.isDisposed!==true)){E.callback(D)}})},this)}},getSubscriptionsCount:function(){var D=0;for(var C in this._subscriptions){if(this._subscriptions.hasOwnProperty(C)){D+=this._subscriptions[C].length}}return D},extend:n};t.isSubscribable=function(C){return typeof C.subscribe=="function"&&typeof C.notifySubscribers=="function"};t.exportSymbol("subscribable",t.subscribable);t.exportSymbol("isSubscribable",t.isSubscribable);t.dependencyDetection=(function(){var C=[];return{begin:function(D){C.push({callback:D,distinctDependencies:[]})},end:function(){C.pop()},registerDependency:function(D){if(!t.isSubscribable(D)){throw new Error("Only subscribable things can act as dependencies")}if(C.length>0){var E=C[C.length-1];if(!E||t.utils.arrayIndexOf(E.distinctDependencies,D)>=0){return}E.distinctDependencies.push(D);E.callback(D)}},ignore:function(D,F,E){try{C.push(null);return D.apply(F,E||[])}finally{C.pop()}}}})();var x={"undefined":true,"boolean":true,number:true,string:true};t.observable=function(D){var C=D;function E(){if(arguments.length>0){if((!E.equalityComparer)||!E.equalityComparer(C,arguments[0])){E.valueWillMutate();C=arguments[0];if(h){E._latestValue=C}E.valueHasMutated()}return this}else{t.dependencyDetection.registerDependency(E);return C}}if(h){E._latestValue=C}t.subscribable.call(E);E.peek=function(){return C};E.valueHasMutated=function(){E.notifySubscribers(C)};E.valueWillMutate=function(){E.notifySubscribers(C,"beforeChange")};t.utils.extend(E,t.observable.fn);t.exportProperty(E,"peek",E.peek);t.exportProperty(E,"valueHasMutated",E.valueHasMutated);t.exportProperty(E,"valueWillMutate",E.valueWillMutate);return E};t.observable.fn={equalityComparer:function A(C,D){var E=(C===null)||(typeof(C) in x);return E?(C===D):false}};var z=t.observable.protoProperty="__ko_proto__";t.observable.fn[z]=t.observable;t.hasPrototype=function(C,D){if((C===null)||(C===l)||(C[z]===l)){return false}if(C[z]===D){return true}return t.hasPrototype(C[z],D)};t.isObservable=function(C){return t.hasPrototype(C,t.observable)};t.isWriteableObservable=function(C){if((typeof C=="function")&&C[z]===t.observable){return true}if((typeof C=="function")&&(C[z]===t.dependentObservable)&&(C.hasWriteFunction)){return true}return false};t.exportSymbol("observable",t.observable);t.exportSymbol("isObservable",t.isObservable);t.exportSymbol("isWriteableObservable",t.isWriteableObservable);t.observableArray=function(C){if(arguments.length==0){C=[]}if((C!==null)&&(C!==l)&&!("length" in C)){throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")}var D=t.observable(C);t.utils.extend(D,t.observableArray.fn);return D};t.observableArray.fn={remove:function(H){var F=this.peek();var E=[];var D=typeof H=="function"?H:function(I){return I===H};for(var C=0;C<F.length;C++){var G=F[C];if(D(G)){if(E.length===0){this.valueWillMutate()}E.push(G);F.splice(C,1);C--}}if(E.length){this.valueHasMutated()}return E},removeAll:function(D){if(D===l){var E=this.peek();var C=E.slice(0);this.valueWillMutate();E.splice(0,E.length);this.valueHasMutated();return C}if(!D){return[]}return this["remove"](function(F){return t.utils.arrayIndexOf(D,F)>=0})},destroy:function(G){var E=this.peek();var D=typeof G=="function"?G:function(H){return H===G};this.valueWillMutate();for(var C=E.length-1;C>=0;C--){var F=E[C];if(D(F)){E[C]["_destroy"]=true}}this.valueHasMutated()},destroyAll:function(C){if(C===l){return this["destroy"](function(){return true})}if(!C){return[]}return this["destroy"](function(D){return t.utils.arrayIndexOf(C,D)>=0})},indexOf:function(C){var D=this();return t.utils.arrayIndexOf(D,C)},replace:function(E,D){var C=this["indexOf"](E);if(C>=0){this.valueWillMutate();this.peek()[C]=D;this.valueHasMutated()}}};t.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(C){t.observableArray.fn[C]=function(){var E=this.peek();this.valueWillMutate();var D=E[C].apply(E,arguments);this.valueHasMutated();return D}});t.utils.arrayForEach(["slice"],function(C){t.observableArray.fn[C]=function(){var D=this();return D[C].apply(D,arguments)}});t.exportSymbol("observableArray",t.observableArray);t.dependentObservable=function(P,Q,T){var E,C=false,D=false,V=P;if(V&&typeof V=="object"){T=V;V=T.read}else{T=T||{};if(!V){V=T.read}}if(typeof V!="function"){throw new Error("Pass a function that returns the value of the ko.computed")}function G(X){F.push(X.subscribe(N))}function J(){t.utils.arrayForEach(F,function(X){X.dispose()});F=[]}function N(){var X=H.throttleEvaluation;if(X&&X>=0){clearTimeout(O);O=setTimeout(M,X)}else{M()}}function M(){if(D){return}if(C&&K()){I();return}D=true;try{var X=t.utils.arrayMap(F,function(aa){return aa.target});t.dependencyDetection.begin(function(ab){var aa;if((aa=t.utils.arrayIndexOf(X,ab))>=0){X[aa]=l}else{G(ab)}});var Z=V.call(Q);for(var Y=X.length-1;Y>=0;Y--){if(X[Y]){F.splice(Y,1)[0].dispose()}}C=true;H.notifySubscribers(E,"beforeChange");E=Z;if(h){H._latestValue=E}}finally{t.dependencyDetection.end()}H.notifySubscribers(E);D=false;if(!F.length){I()}}function H(){if(arguments.length>0){if(typeof W==="function"){W.apply(Q,arguments)}else{throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")}return this}else{if(!C){M()}t.dependencyDetection.registerDependency(H);return E}}function U(){if(!C){M()}return E}function S(){return !C||F.length>0}var W=T.write,L=T.disposeWhenNodeIsRemoved||T.disposeWhenNodeIsRemoved||null,K=T.disposeWhen||T.disposeWhen||function(){return false},I=J,F=[],O=null;if(!Q){Q=T.owner}H.peek=U;H.getDependenciesCount=function(){return F.length};H.hasWriteFunction=typeof T.write==="function";H.dispose=function(){I()};H.isActive=S;t.subscribable.call(H);t.utils.extend(H,t.dependentObservable.fn);t.exportProperty(H,"peek",H.peek);t.exportProperty(H,"dispose",H.dispose);t.exportProperty(H,"isActive",H.isActive);t.exportProperty(H,"getDependenciesCount",H.getDependenciesCount);if(T.deferEvaluation!==true){M()}if(L&&S()){I=function(){t.utils.domNodeDisposal.removeDisposeCallback(L,arguments.callee);J()};t.utils.domNodeDisposal.addDisposeCallback(L,I);var R=K;K=function(){return !t.utils.domNodeIsAttachedToDocument(L)||R()}}return H};t.isComputed=function(C){return t.hasPrototype(C,t.dependentObservable)};var y=t.observable.protoProperty;t.dependentObservable[y]=t.observable;t.dependentObservable.fn={};t.dependentObservable.fn[y]=t.dependentObservable;t.exportSymbol("dependentObservable",t.dependentObservable);t.exportSymbol("computed",t.dependentObservable);t.exportSymbol("isComputed",t.isComputed);(function(){var D=10;t.toJS=function(G){if(arguments.length==0){throw new Error("When calling ko.toJS, pass the object you want to convert.")}return C(G,function(I){for(var H=0;t.isObservable(I)&&(H<D);H++){I=I()}return I})};t.toJSON=function(I,H,J){var G=t.toJS(I);return t.utils.stringifyJson(G,H,J)};function C(J,H,K){K=K||new E();J=H(J);var G=(typeof J=="object")&&(J!==null)&&(J!==l)&&(!(J instanceof Date));if(!G){return J}var I=J instanceof Array?[]:{};K.save(J,I);F(J,function(L){var N=H(J[L]);switch(typeof N){case"boolean":case"number":case"string":case"function":I[L]=N;break;case"object":case"undefined":var M=K.get(N);I[L]=(M!==l)?M:C(N,H,K);break}});return I}function F(I,J){if(I instanceof Array){for(var G=0;G<I.length;G++){J(G)}if(typeof I.toJSON=="function"){J("toJSON")}}else{for(var H in I){J(H)}}}function E(){var G=[];var H=[];this.save=function(J,K){var I=t.utils.arrayIndexOf(G,J);if(I>=0){H[I]=K}else{G.push(J);H.push(K)}};this.get=function(J){var I=t.utils.arrayIndexOf(G,J);return(I>=0)?H[I]:l}}})();t.exportSymbol("toJS",t.toJS);t.exportSymbol("toJSON",t.toJSON);(function(){var C="__ko__hasDomDataOptionValue__";t.selectExtensions={readValue:function(D){switch(t.utils.tagNameLower(D)){case"option":if(D[C]===true){return t.utils.domData.get(D,t.bindingHandlers.options.optionValueDomDataKey)}return t.utils.ieVersion<=7?(D.getAttributeNode("value").specified?D.value:D.text):D.value;case"select":return D.selectedIndex>=0?t.selectExtensions.readValue(D.options[D.selectedIndex]):l;default:return D.value}},writeValue:function(D,F){switch(t.utils.tagNameLower(D)){case"option":switch(typeof F){case"string":t.utils.domData.set(D,t.bindingHandlers.options.optionValueDomDataKey,l);if(C in D){delete D[C]}D.value=F;break;default:t.utils.domData.set(D,t.bindingHandlers.options.optionValueDomDataKey,F);D[C]=true;D.value=typeof F==="number"?F:"";break}break;case"select":for(var E=D.options.length-1;E>=0;E--){if(t.selectExtensions.readValue(D.options[E])==F){D.selectedIndex=E;break}}break;default:if((F===null)||(F===l)){F=""}D.value=F;break}}}})();t.exportSymbol("selectExtensions",t.selectExtensions);t.exportSymbol("selectExtensions.readValue",t.selectExtensions.readValue);t.exportSymbol("selectExtensions.writeValue",t.selectExtensions.writeValue);t.expressionRewriting=(function(){var G=/\@ko_token_(\d+)\@/g;var F=["true","false"];var E=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;function H(J,K){var I=null;while(J!=I){I=J;J=J.replace(G,function(L,M){return K[M]})}return J}function D(I){if(t.utils.arrayIndexOf(F,t.utils.stringTrim(I).toLowerCase())>=0){return false}var J=I.match(E);return J===null?false:J[1]?("Object("+J[1]+")"+J[2]):I}function C(I){var J=t.utils.stringTrim(I);switch(J.length&&J.charAt(0)){case"'":case'"':return I;default:return"'"+J+"'"}}return{bindingRewriteValidators:[],parseObjectLiteral:function(O){var T=t.utils.stringTrim(O);if(T.length<3){return[]}if(T.charAt(0)==="{"){T=T.substring(1,T.length-1)}var X=[];var Y=null,W;for(var Q=0;Q<T.length;Q++){var I=T.charAt(Q);if(Y===null){switch(I){case'"':case"'":case"/":Y=Q;W=I;break}}else{if((I==W)&&(T.charAt(Q-1)!=="\\")){var U=T.substring(Y,Q+1);X.push(U);var R="@ko_token_"+(X.length-1)+"@";T=T.substring(0,Y)+R+T.substring(Q+1);Q-=(U.length-R.length);Y=null}}}Y=null;W=null;var V=0,Z=null;for(var Q=0;Q<T.length;Q++){var I=T.charAt(Q);if(Y===null){switch(I){case"{":Y=Q;Z=I;W="}";break;case"(":Y=Q;Z=I;W=")";break;case"[":Y=Q;Z=I;W="]";break}}if(I===Z){V++}else{if(I===W){V--;if(V===0){var U=T.substring(Y,Q+1);X.push(U);var R="@ko_token_"+(X.length-1)+"@";T=T.substring(0,Y)+R+T.substring(Q+1);Q-=(U.length-R.length);Y=null}}}}var S=[];var N=T.split(",");for(var K=0,L=N.length;K<L;K++){var P=N[K];var J=P.indexOf(":");if((J>0)&&(J<P.length-1)){var M=P.substring(0,J);var aa=P.substring(J+1);S.push({key:H(M,X),value:H(aa,X)})}else{S.push({unknown:H(P,X)})}}return S},preProcessBindings:function(N){var L=typeof N==="string"?t.expressionRewriting.parseObjectLiteral(N):N;var Q=[],O=[];var M;for(var K=0;M=L[K];K++){if(Q.length>0){Q.push(",")}if(M.key){var P=C(M.key),R=M.value;Q.push(P);Q.push(":");Q.push(R);if(R=D(t.utils.stringTrim(R))){if(O.length>0){O.push(", ")}O.push(P+" : function(__ko_value) { "+R+" = __ko_value; }")}}else{if(M.unknown){Q.push(M.unknown)}}}var J=Q.join("");if(O.length>0){var I=O.join("");J=J+", '_ko_property_writers' : { "+I+" } "}return J},keyValueArrayContainsKey:function(K,J){for(var I=0;I<K.length;I++){if(t.utils.stringTrim(K[I]["key"])==J){return true}}return false},writeValueToProperty:function(L,I,K,N,J){if(!L||!t.isWriteableObservable(L)){var M=I()["_ko_property_writers"];if(M&&M[K]){M[K](N)}}else{if(!J||L.peek()!==N){L(N)}}}}})();t.exportSymbol("expressionRewriting",t.expressionRewriting);t.exportSymbol("expressionRewriting.bindingRewriteValidators",t.expressionRewriting.bindingRewriteValidators);t.exportSymbol("expressionRewriting.parseObjectLiteral",t.expressionRewriting.parseObjectLiteral);t.exportSymbol("expressionRewriting.preProcessBindings",t.expressionRewriting.preProcessBindings);t.exportSymbol("jsonExpressionRewriting",t.expressionRewriting);t.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",t.expressionRewriting.preProcessBindings);(function(){var C=i.createComment("test").text==="<!--test-->";var K=C?/^<!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*-->$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/;var D=C?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/;var H={ul:true,ol:true};function J(L){return(L.nodeType==8)&&(C?L.text:L.nodeValue).match(K)}function I(L){return(L.nodeType==8)&&(C?L.text:L.nodeValue).match(D)}function G(P,L){var N=P;var O=1;var M=[];while(N=N.nextSibling){if(I(N)){O--;if(O===0){return M}}M.push(N);if(J(N)){O++}}if(!L){throw new Error("Cannot find closing comment tag to match: "+P.nodeValue)}return null}function E(N,L){var M=G(N,L);if(M){if(M.length>0){return M[M.length-1].nextSibling}return N.nextSibling}else{return null}}function F(O){var M=O.firstChild,L=null;if(M){do{if(L){L.push(M)}else{if(J(M)){var N=E(M,true);if(N){M=N}else{L=[M]}}else{if(I(M)){L=[M]}}}}while(M=M.nextSibling)}return L}t.virtualElements={allowedBindings:{},childNodes:function(L){return J(L)?G(L):L.childNodes},emptyNode:function(N){if(!J(N)){t.utils.emptyDomNode(N)}else{var O=t.virtualElements.childNodes(N);for(var L=0,M=O.length;L<M;L++){t.removeNode(O[L])}}},setDomNodeChildren:function(P,L){if(!J(P)){t.utils.setDomNodeChildren(P,L)}else{t.virtualElements.emptyNode(P);var M=P.nextSibling;for(var N=0,O=L.length;N<O;N++){M.parentNode.insertBefore(L[N],M)}}},prepend:function(L,M){if(!J(L)){if(L.firstChild){L.insertBefore(M,L.firstChild)}else{L.appendChild(M)}}else{L.parentNode.insertBefore(M,L.nextSibling)}},insertAfter:function(L,N,M){if(!M){t.virtualElements.prepend(L,N)}else{if(!J(L)){if(M.nextSibling){L.insertBefore(N,M.nextSibling)}else{L.appendChild(N)}}else{L.parentNode.insertBefore(N,M.nextSibling)}}},firstChild:function(L){if(!J(L)){return L.firstChild}if(!L.nextSibling||I(L.nextSibling)){return null}return L.nextSibling},nextSibling:function(L){if(J(L)){L=E(L)}if(L.nextSibling&&I(L.nextSibling)){return null}return L.nextSibling},virtualNodeBindingValue:function(L){var M=J(L);return M?M[1]:null},normaliseVirtualElementDomStructure:function(M){if(!H[t.utils.tagNameLower(M)]){return}var L=M.firstChild;if(L){do{if(L.nodeType===1){var P=F(L);if(P){var O=L.nextSibling;for(var N=0;N<P.length;N++){if(O){M.insertBefore(P[N],O)}else{M.appendChild(P[N])}}}}}while(L=L.nextSibling)}}}})();t.exportSymbol("virtualElements",t.virtualElements);t.exportSymbol("virtualElements.allowedBindings",t.virtualElements.allowedBindings);t.exportSymbol("virtualElements.emptyNode",t.virtualElements.emptyNode);t.exportSymbol("virtualElements.insertAfter",t.virtualElements.insertAfter);t.exportSymbol("virtualElements.prepend",t.virtualElements.prepend);t.exportSymbol("virtualElements.setDomNodeChildren",t.virtualElements.setDomNodeChildren);(function(){var E="data-bind";t.bindingProvider=function(){this.bindingCache={}};t.utils.extend(t.bindingProvider.prototype,{nodeHasBindings:function(F){switch(F.nodeType){case 1:return F.getAttribute(E)!=null;case 8:return t.virtualElements.virtualNodeBindingValue(F)!=null;default:return false}},getBindings:function(H,F){var G=this["getBindingsString"](H,F);return G?this["parseBindingsString"](G,F,H):null},getBindingsString:function(G,F){switch(G.nodeType){case 1:return G.getAttribute(E);case 8:return t.virtualElements.virtualNodeBindingValue(G);default:return null}},parseBindingsString:function(H,F,J){try{var G=D(H,this.bindingCache);return G(F,J)}catch(I){throw new Error("Unable to parse bindings.\nMessage: "+I+";\nBindings value: "+H)}}});t.bindingProvider.instance=new t.bindingProvider();function D(F,G){var H=F;return G[H]||(G[H]=C(F))}function C(F){var H=t.expressionRewriting.preProcessBindings(F),G="with($context){with($data||{}){return{"+H+"}}}";return new Function("$context","$element",G)}})();t.exportSymbol("bindingProvider",t.bindingProvider);(function(){t.bindingHandlers={};t.bindingContext=function(H,J,I){if(J){t.utils.extend(this,J);this["$parentContext"]=J;this["$parent"]=J["$data"];this["$parents"]=(J["$parents"]||[]).slice(0);this["$parents"].unshift(this["$parent"])}else{this["$parents"]=[];this["$root"]=H;this["ko"]=t}this["$data"]=H;if(I){this[I]=H}};t.bindingContext.prototype.createChildContext=function(H,I){return new t.bindingContext(H,this,I)};t.bindingContext.prototype.extend=function(I){var H=t.utils.extend(new t.bindingContext(),this);return t.utils.extend(H,I)};function G(H){var I=t.virtualElements.allowedBindings[H];if(!I){throw new Error("The binding '"+H+"' cannot be used with virtual elements")}}function C(L,J,H){var I,K=t.virtualElements.firstChild(J);while(I=K){K=t.virtualElements.nextSibling(I);D(L,I,H)}}function D(M,J,H){var L=true;var I=(J.nodeType===1);if(I){t.virtualElements.normaliseVirtualElementDomStructure(J)}var K=(I&&H)||t.bindingProvider.instance["nodeHasBindings"](J);if(K){L=E(J,null,M,H).shouldBindDescendants}if(L){C(M,J,!I)}}function E(M,J,P,H){var K=0;var N;function L(Q){return function(){return N[Q]}}function O(){return N}var I;t.dependentObservable(function(){var R=P&&(P instanceof t.bindingContext)?P:new t.bindingContext(t.utils.unwrapObservable(P));var X=R["$data"];if(H){t.storedBindingContextForNode(M,R)}var T=(typeof J=="function")?J(R,M):J;N=T||t.bindingProvider.instance["getBindings"](M,R);if(N){if(K===0){K=1;for(var S in N){var Q=t.bindingHandlers[S];if(Q&&M.nodeType===8){G(S)}if(Q&&typeof Q.init=="function"){var U=Q.init;var W=U(M,L(S),O,X,R);if(W&&W.controlsDescendantBindings){if(I!==l){throw new Error("Multiple bindings ("+I+" and "+S+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")}I=S}}}K=2}if(K===2){for(var S in N){var Q=t.bindingHandlers[S];if(Q&&typeof Q.update=="function"){var V=Q.update;V(M,L(S),O,X,R)}}}}},null,{disposeWhenNodeIsRemoved:M});return{shouldBindDescendants:I===l}}var F="__ko_bindingContext__";t.storedBindingContextForNode=function(I,H){if(arguments.length==2){t.utils.domData.set(I,F,H)}else{return t.utils.domData.get(I,F)}};t.applyBindingsToNode=function(I,H,J){if(I.nodeType===1){t.virtualElements.normaliseVirtualElementDomStructure(I)}return E(I,H,J,true)};t.applyBindingsToDescendants=function(I,H){if(H.nodeType===1||H.nodeType===8){C(I,H,true)}};t.applyBindings=function(I,H){if(H&&(H.nodeType!==1)&&(H.nodeType!==8)){throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")}H=H||m.document.body;D(I,H,true)};t.contextFor=function(I){switch(I.nodeType){case 1:case 8:var H=t.storedBindingContextForNode(I);if(H){return H}if(I.parentNode){return t.contextFor(I.parentNode)}break}return l};t.dataFor=function(I){var H=t.contextFor(I);return H?H["$data"]:l};t.exportSymbol("bindingHandlers",t.bindingHandlers);t.exportSymbol("applyBindings",t.applyBindings);t.exportSymbol("applyBindingsToDescendants",t.applyBindingsToDescendants);t.exportSymbol("applyBindingsToNode",t.applyBindingsToNode);t.exportSymbol("contextFor",t.contextFor);t.exportSymbol("dataFor",t.dataFor)})();var o={"class":"className","for":"htmlFor"};t.bindingHandlers.attr={update:function(F,I,C){var H=t.utils.unwrapObservable(I())||{};for(var D in H){if(typeof D=="string"){var E=t.utils.unwrapObservable(H[D]);var G=(E===false)||(E===null)||(E===l);if(G){F.removeAttribute(D)}if(t.utils.ieVersion<=8&&D in o){D=o[D];if(G){F.removeAttribute(D)}else{F[D]=E}}else{if(!G){F.setAttribute(D,E.toString())}}if(D==="name"){t.utils.setElementName(F,G?"":E.toString())}}}}};t.bindingHandlers.checked={init:function(D,F,C){var E=function(){var J;if(D.type=="checkbox"){J=D.checked}else{if((D.type=="radio")&&(D.checked)){J=D.value}else{return}}var H=F(),I=t.utils.unwrapObservable(H);if((D.type=="checkbox")&&(I instanceof Array)){var G=t.utils.arrayIndexOf(I,D.value);if(D.checked&&(G<0)){H.push(D.value)}else{if((!D.checked)&&(G>=0)){H.splice(G,1)}}}else{t.expressionRewriting.writeValueToProperty(H,C,"checked",J,true)}};t.utils.registerEventHandler(D,"click",E);if((D.type=="radio")&&!D.name){t.bindingHandlers.uniqueName["init"](D,function(){return true})}},update:function(C,E){var D=t.utils.unwrapObservable(E());if(C.type=="checkbox"){if(D instanceof Array){C.checked=t.utils.arrayIndexOf(D,C.value)>=0}else{C.checked=D}}else{if(C.type=="radio"){C.checked=(C.value==D)}}}};var p="__ko__cssValue";t.bindingHandlers.css={update:function(D,G){var F=t.utils.unwrapObservable(G());if(typeof F=="object"){for(var C in F){var E=t.utils.unwrapObservable(F[C]);t.utils.toggleDomNodeCssClass(D,C,E)}}else{F=String(F||"");t.utils.toggleDomNodeCssClass(D,D[p],false);D[p]=F;t.utils.toggleDomNodeCssClass(D,F,true)}}};t.bindingHandlers.enable={update:function(C,E){var D=t.utils.unwrapObservable(E());if(D&&C.disabled){C.removeAttribute("disabled")}else{if((!D)&&(!C.disabled)){C.disabled=true}}}};t.bindingHandlers.disable={update:function(C,D){t.bindingHandlers.enable["update"](C,function(){return !t.utils.unwrapObservable(D())})}};function v(C){t.bindingHandlers[C]={init:function(E,G,D,H){var F=function(){var I={};I[C]=G();return I};return t.bindingHandlers.event["init"].call(this,E,F,D,H)}}}t.bindingHandlers.event={init:function(D,G,C,H){var F=G()||{};for(var E in F){(function(){var I=E;if(typeof I=="string"){t.utils.registerEventHandler(D,I,function(M){var O;var N=G()[I];if(!N){return}var J=C();try{var K=t.utils.makeArray(arguments);K.unshift(H);O=N.apply(H,K)}finally{if(O!==true){if(M.preventDefault){M.preventDefault()}else{M.returnValue=false}}}var L=J[I+"Bubble"]!==false;if(!L){M.cancelBubble=true;if(M.stopPropagation){M.stopPropagation()}}})}})()}}};t.bindingHandlers.foreach={makeTemplateValueAccessor:function(C){return function(){var D=C(),E=t.utils.peekObservable(D);if((!E)||typeof E.length=="number"){return{foreach:D,templateEngine:t.nativeTemplateEngine.instance}}t.utils.unwrapObservable(D);return{foreach:E.data,as:E.as,includeDestroyed:E.includeDestroyed,afterAdd:E.afterAdd,beforeRemove:E.beforeRemove,afterRender:E.afterRender,beforeMove:E.beforeMove,afterMove:E.afterMove,templateEngine:t.nativeTemplateEngine.instance}}},init:function(E,F,C,G,D){return t.bindingHandlers.template["init"](E,t.bindingHandlers.foreach.makeTemplateValueAccessor(F))},update:function(E,F,C,G,D){return t.bindingHandlers.template["update"](E,t.bindingHandlers.foreach.makeTemplateValueAccessor(F),C,G,D)}};t.expressionRewriting.bindingRewriteValidators.foreach=false;t.virtualElements.allowedBindings.foreach=true;var s="__ko_hasfocusUpdating";t.bindingHandlers.hasfocus={init:function(D,H,C){var E=function(I){D[s]=true;var K=D.ownerDocument;if("activeElement" in K){I=(K.activeElement===D)}var J=H();t.expressionRewriting.writeValueToProperty(J,C,"hasfocus",I,true);D[s]=false};var F=E.bind(null,true);var G=E.bind(null,false);t.utils.registerEventHandler(D,"focus",F);t.utils.registerEventHandler(D,"focusin",F);t.utils.registerEventHandler(D,"blur",G);t.utils.registerEventHandler(D,"focusout",G)},update:function(C,E){var D=t.utils.unwrapObservable(E());if(!C[s]){D?C.focus():C.blur();t.dependencyDetection.ignore(t.utils.triggerEvent,null,[C,D?"focusin":"focusout"])}}};t.bindingHandlers.html={init:function(){return{controlsDescendantBindings:true}},update:function(C,D){t.utils.setHtml(C,D())}};var B="__ko_withIfBindingData";function w(C,E,D,F){t.bindingHandlers[C]={init:function(I,J,G,K,H){t.utils.domData.set(I,B,{});return{controlsDescendantBindings:true}},update:function(J,N,G,O,H){var P=t.utils.domData.get(J,B),I=t.utils.unwrapObservable(N()),M=!D!==!I,K=!P.savedNodes,L=K||E||(M!==P.didDisplayOnLastUpdate);if(L){if(K){P.savedNodes=t.utils.cloneNodes(t.virtualElements.childNodes(J),true)}if(M){if(!K){t.virtualElements.setDomNodeChildren(J,t.utils.cloneNodes(P.savedNodes))}t.applyBindingsToDescendants(F?F(H,I):H,J)}else{t.virtualElements.emptyNode(J)}P.didDisplayOnLastUpdate=M}}};t.expressionRewriting.bindingRewriteValidators[C]=false;t.virtualElements.allowedBindings[C]=true}w("if");w("ifnot",false,true);w("with",true,false,function(C,D){return C.createChildContext(D)});function r(C,D,E){if(E){if(D!==t.selectExtensions.readValue(C)){t.selectExtensions.writeValue(C,D)}}if(D!==t.selectExtensions.readValue(C)){t.dependencyDetection.ignore(t.utils.triggerEvent,null,[C,"change"])}}t.bindingHandlers.options={update:function(H,U,D){if(t.utils.tagNameLower(H)!=="select"){throw new Error("options binding applies only to SELECT elements")}var S=H.length==0;var Q=t.utils.arrayMap(t.utils.arrayFilter(H.childNodes,function(V){return V.tagName&&(t.utils.tagNameLower(V)==="option")&&V.selected}),function(V){return t.selectExtensions.readValue(V)||V.innerText||V.textContent});var P=H.scrollTop;var T=t.utils.unwrapObservable(U());var R=H.value;while(H.length>0){t.cleanNode(H.options[0]);H.remove(0)}if(T){var C=D(),J=C.optionsIncludeDestroyed;if(typeof T.length!="number"){T=[T]}if(C.optionsCaption){var M=i.createElement("option");t.utils.setHtml(M,C.optionsCaption);t.selectExtensions.writeValue(M,l);H.appendChild(M)}for(var I=0,K=T.length;I<K;I++){var F=T[I];if(F&&F._destroy&&!J){continue}var M=i.createElement("option");function E(W,X,V){var Y=typeof X;if(Y=="function"){return X(W)}else{if(Y=="string"){return W[X]}else{return V}}}var O=E(F,C.optionsValue,F);t.selectExtensions.writeValue(M,t.utils.unwrapObservable(O));var N=E(F,C.optionsText,O);t.utils.setTextContent(M,N);H.appendChild(M)}var L=H.getElementsByTagName("option");var G=0;for(var I=0,K=L.length;I<K;I++){if(t.utils.arrayIndexOf(Q,t.selectExtensions.readValue(L[I]))>=0){t.utils.setOptionNodeSelectionState(L[I],true);G++}}H.scrollTop=P;if(S&&("value" in C)){r(H,t.utils.peekObservable(C.value),true)}t.utils.ensureSelectElementIsRenderedCorrectly(H)}}};t.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__";t.bindingHandlers.selectedOptions={init:function(D,E,C){t.utils.registerEventHandler(D,"change",function(){var F=E(),G=[];t.utils.arrayForEach(D.getElementsByTagName("option"),function(H){if(H.selected){G.push(t.selectExtensions.readValue(H))}});t.expressionRewriting.writeValueToProperty(F,C,"value",G)})},update:function(C,E){if(t.utils.tagNameLower(C)!="select"){throw new Error("values binding applies only to SELECT elements")}var D=t.utils.unwrapObservable(E());if(D&&typeof D.length=="number"){t.utils.arrayForEach(C.getElementsByTagName("option"),function(G){var F=t.utils.arrayIndexOf(D,t.selectExtensions.readValue(G))>=0;t.utils.setOptionNodeSelectionState(G,F)})}}};t.bindingHandlers.style={update:function(C,G){var F=t.utils.unwrapObservable(G()||{});for(var D in F){if(typeof D=="string"){var E=t.utils.unwrapObservable(F[D]);C.style[D]=E||""}}}};t.bindingHandlers.submit={init:function(D,E,C,F){if(typeof E()!="function"){throw new Error("The value for a submit binding must be a function")}t.utils.registerEventHandler(D,"submit",function(G){var H;var I=E();try{H=I.call(F,D)}finally{if(H!==true){if(G.preventDefault){G.preventDefault()}else{G.returnValue=false}}}})}};t.bindingHandlers.text={update:function(C,D){t.utils.setTextContent(C,D())}};t.virtualElements.allowedBindings.text=true;t.bindingHandlers.uniqueName={init:function(C,E){if(E()){var D="ko_unique_"+(++t.bindingHandlers.uniqueName.currentIndex);t.utils.setElementName(C,D)}}};t.bindingHandlers.uniqueName.currentIndex=0;t.bindingHandlers.value={init:function(D,I,C){var E=["change"];var H=C()["valueUpdate"];var G=false;if(H){if(typeof H=="string"){H=[H]}t.utils.arrayPushAll(E,H);E=t.utils.arrayGetDistinctValues(E)}var J=function(){G=false;var L=I();var K=t.selectExtensions.readValue(D);t.expressionRewriting.writeValueToProperty(L,C,"value",K)};var F=t.utils.ieVersion&&D.tagName.toLowerCase()=="input"&&D.type=="text"&&D.autocomplete!="off"&&(!D.form||D.form.autocomplete!="off");if(F&&t.utils.arrayIndexOf(E,"propertychange")==-1){t.utils.registerEventHandler(D,"propertychange",function(){G=true});t.utils.registerEventHandler(D,"blur",function(){if(G){J()}})}t.utils.arrayForEach(E,function(K){var L=J;if(t.utils.stringStartsWith(K,"after")){L=function(){setTimeout(J,0)};K=K.substring("after".length)}t.utils.registerEventHandler(D,K,L)})},update:function(E,H){var J=t.utils.tagNameLower(E)==="select";var G=t.utils.unwrapObservable(H());var F=t.selectExtensions.readValue(E);var I=(G!=F);if((G===0)&&(F!==0)&&(F!=="0")){I=true}if(I){var D=function(){t.selectExtensions.writeValue(E,G)};D();var C=J;if(C){setTimeout(D,0)}}if(J&&(E.length>0)){r(E,G,false)}}};t.bindingHandlers.visible={update:function(C,F){var E=t.utils.unwrapObservable(F());var D=!(C.style.display=="none");if(E&&!D){C.style.display=""}else{if((!E)&&D){C.style.display="none"}}}};v("click");t.templateEngine=function(){};t.templateEngine.prototype.renderTemplateSource=function(E,C,D){throw new Error("Override renderTemplateSource")};t.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(C){throw new Error("Override createJavaScriptEvaluatorBlock")};t.templateEngine.prototype.makeTemplateSource=function(D,E){if(typeof D=="string"){E=E||i;var C=E.getElementById(D);if(!C){throw new Error("Cannot find template with ID "+D)}return new t.templateSources.domElement(C)}else{if((D.nodeType==1)||(D.nodeType==8)){return new t.templateSources.anonymousTemplate(D)}else{throw new Error("Unknown template type: "+D)}}};t.templateEngine.prototype.renderTemplate=function(E,C,D,F){var G=this["makeTemplateSource"](E,F);return this["renderTemplateSource"](G,C,D)};t.templateEngine.prototype.isTemplateRewritten=function(C,D){if(this["allowTemplateRewriting"]===false){return true}return this["makeTemplateSource"](C,D)["data"]("isRewritten")};t.templateEngine.prototype.rewriteTemplate=function(E,C,F){var G=this["makeTemplateSource"](E,F);var D=C(G.text());G.text(D);G.data("isRewritten",true)};t.exportSymbol("templateEngine",t.templateEngine);t.templateRewriting=(function(){var D=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;var E=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;function F(J){var G=t.expressionRewriting.bindingRewriteValidators;for(var H=0;H<J.length;H++){var I=J[H]["key"];if(G.hasOwnProperty(I)){var L=G[I];if(typeof L==="function"){var K=L(J[H]["value"]);if(K){throw new Error(K)}}else{if(!L){throw new Error("This template engine does not support the '"+I+"' binding within its templates")}}}}}function C(H,K,L){var I=t.expressionRewriting.parseObjectLiteral(H);F(I);var J=t.expressionRewriting.preProcessBindings(I);var G="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+J+" } })()})";return L.createJavaScriptEvaluatorBlock(G)+K}return{ensureTemplateIsRewritten:function(G,I,H){if(!I.isTemplateRewritten(G,H)){I.rewriteTemplate(G,function(J){return t.templateRewriting.memoizeBindingAttributeSyntax(J,I)},H)}},memoizeBindingAttributeSyntax:function(G,H){return G.replace(D,function(){return C(arguments[6],arguments[1],H)}).replace(E,function(){return C(arguments[1],"<!-- ko -->",H)})},applyMemoizedBindingsToNextSibling:function(G){return t.memoization.memoize(function(I,H){if(I.nextSibling){t.applyBindingsToNode(I.nextSibling,G,H)}})}}})();t.exportSymbol("__tr_ambtns",t.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){t.templateSources={};t.templateSources.domElement=function(D){this.domElement=D};t.templateSources.domElement.prototype.text=function(){var E=t.utils.tagNameLower(this.domElement),D=E==="script"?"text":E==="textarea"?"value":"innerHTML";if(arguments.length==0){return this.domElement[D]}else{var F=arguments[0];if(D==="innerHTML"){t.utils.setHtml(this.domElement,F)}else{this.domElement[D]=F}}};t.templateSources.domElement.prototype.data=function(D){if(arguments.length===1){return t.utils.domData.get(this.domElement,"templateSourceData_"+D)}else{t.utils.domData.set(this.domElement,"templateSourceData_"+D,arguments[1])}};var C="__ko_anon_template__";t.templateSources.anonymousTemplate=function(D){this.domElement=D};t.templateSources.anonymousTemplate.prototype=new t.templateSources.domElement();t.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var D=t.utils.domData.get(this.domElement,C)||{};if(D.textData===l&&D.containerData){D.textData=D.containerData.innerHTML}return D.textData}else{var E=arguments[0];t.utils.domData.set(this.domElement,C,{textData:E})}};t.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var D=t.utils.domData.get(this.domElement,C)||{};return D.containerData}else{var E=arguments[0];t.utils.domData.set(this.domElement,C,{containerData:E})}};t.exportSymbol("templateSources",t.templateSources);t.exportSymbol("templateSources.domElement",t.templateSources.domElement);t.exportSymbol("templateSources.anonymousTemplate",t.templateSources.anonymousTemplate)})();(function(){var C;t.setTemplateEngine=function(J){if((J!=l)&&!(J instanceof t.templateEngine)){throw new Error("templateEngine must inherit from ko.templateEngine")}C=J};function H(K,M,J){var O,N=K,L=t.virtualElements.nextSibling(M);while(N&&((O=N)!==L)){N=t.virtualElements.nextSibling(O);if(O.nodeType===1||O.nodeType===8){J(O)}}}function D(K,J){if(K.length){var L=K[0],M=K[K.length-1];H(L,M,function(N){t.applyBindings(J,N)});H(L,M,function(N){t.memoization.unmemoizeDomNodeAndDescendants(N,[J])})}}function G(J){return J.nodeType?J:J.length>0?J[0]:null}function F(P,O,Q,J,M){M=M||{};var K=P&&G(P);var R=K&&K.ownerDocument;var S=(M.templateEngine||C);t.templateRewriting.ensureTemplateIsRewritten(Q,S,R);var N=S.renderTemplate(Q,J,M,R);if((typeof N.length!="number")||(N.length>0&&typeof N[0].nodeType!="number")){throw new Error("Template engine must return an array of DOM nodes")}var L=false;switch(O){case"replaceChildren":t.virtualElements.setDomNodeChildren(P,N);L=true;break;case"replaceNode":t.utils.replaceDomNodes(P,N);L=true;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+O)}if(L){D(N,J);if(M.afterRender){t.dependencyDetection.ignore(M.afterRender,null,[N,J["$data"]])}}return N}t.renderTemplate=function(P,K,M,O,N){M=M||{};if((M.templateEngine||C)==l){throw new Error("Set a template engine before calling renderTemplate")}N=N||"replaceChildren";if(O){var L=G(O);var Q=function(){return(!L)||!t.utils.domNodeIsAttachedToDocument(L)};var J=(L&&N=="replaceNode")?L.parentNode:L;return t.dependentObservable(function(){var R=(K&&(K instanceof t.bindingContext))?K:new t.bindingContext(t.utils.unwrapObservable(K));var T=typeof(P)=="function"?P(R["$data"],R):P;var S=F(O,N,T,R,M);if(N=="replaceNode"){O=S;L=G(O)}},null,{disposeWhen:Q,disposeWhenNodeIsRemoved:J})}else{return t.memoization.memoize(function(R){t.renderTemplate(P,K,M,R,"replaceNode")})}};t.renderTemplateForEach=function(Q,L,N,P,O){var K;var M=function(R,S){K=O.createChildContext(t.utils.unwrapObservable(R),N.as);K["$index"]=S;var T=typeof(Q)=="function"?Q(R,K):Q;return F(null,"ignoreTargetNode",T,K,N)};var J=function(S,R,T){D(R,K);if(N.afterRender){N.afterRender(R,S)}};return t.dependentObservable(function(){var S=t.utils.unwrapObservable(L)||[];if(typeof S.length=="undefined"){S=[S]}var R=t.utils.arrayFilter(S,function(T){return N.includeDestroyed||T===l||T===null||!t.utils.unwrapObservable(T._destroy)});t.dependencyDetection.ignore(t.utils.setDomNodeChildrenFromArrayMapping,null,[P,R,M,N,J])},null,{disposeWhenNodeIsRemoved:P})};var I="__ko__templateComputedDomDataKey__";function E(J,K){var L=t.utils.domData.get(J,I);if(L&&(typeof(L.dispose)=="function")){L.dispose()}t.utils.domData.set(J,I,(K&&K.isActive())?K:l)}t.bindingHandlers.template={init:function(L,N){var J=t.utils.unwrapObservable(N());if((typeof J!="string")&&(!J.name)&&(L.nodeType==1||L.nodeType==8)){var M=L.nodeType==1?L.childNodes:t.virtualElements.childNodes(L),K=t.utils.moveCleanedNodesToContainerElement(M);new t.templateSources.anonymousTemplate(L)["nodes"](K)}return{controlsDescendantBindings:true}},update:function(N,T,J,U,K){var S=t.utils.unwrapObservable(T()),P={},Q=true,M,R=null;if(typeof S!="string"){P=S;S=P.name;if("if" in P){Q=t.utils.unwrapObservable(P["if"])}if(Q&&"ifnot" in P){Q=!t.utils.unwrapObservable(P.ifnot)}M=t.utils.unwrapObservable(P.data)}if("foreach" in P){var L=(Q&&P.foreach)||[];R=t.renderTemplateForEach(S||N,L,P,N,K)}else{if(!Q){t.virtualElements.emptyNode(N)}else{var O=("data" in P)?K.createChildContext(M,P.as):K;R=t.renderTemplate(S||N,O,P,N)}}E(N,R)}};t.expressionRewriting.bindingRewriteValidators.template=function(J){var K=t.expressionRewriting.parseObjectLiteral(J);if((K.length==1)&&K[0]["unknown"]){return null}if(t.expressionRewriting.keyValueArrayContainsKey(K,"name")){return null}return"This template engine does not support anonymous templates nested within its templates"};t.virtualElements.allowedBindings.template=true})();t.exportSymbol("setTemplateEngine",t.setTemplateEngine);t.exportSymbol("renderTemplate",t.renderTemplate);t.utils.compareArrays=(function(){var F="added",E="deleted";function C(I,H,G){I=I||[];H=H||[];if(I.length<=H.length){return D(I,H,F,E,G)}else{return D(H,I,E,F,G)}}function D(ad,H,ah,ag,O){var X=Math.min,W=Math.max,P=[],ae,af=ad.length,I,J=H.length,M=(J-af)||1,U=af+J+1,ai,S,K,L;for(ae=0;ae<=af;ae++){S=ai;P.push(ai=[]);K=X(J,ae+M);L=W(0,ae-1);for(I=L;I<=K;I++){if(!I){ai[I]=ae+1}else{if(!ae){ai[I]=I+1}else{if(ad[ae-1]===H[I-1]){ai[I]=S[I-1]}else{var Y=S[I]||U;var aj=ai[I-1]||U;ai[I]=X(Y,aj)+1}}}}}var Q=[],V,ab=[],Z=[];for(ae=af,I=J;ae||I;){V=P[ae][I]-1;if(I&&V===P[ae][I-1]){ab.push(Q[Q.length]={status:ah,value:H[--I],index:I})}else{if(ae&&V===P[ae-1][I]){Z.push(Q[Q.length]={status:ag,value:ad[--ae],index:ae})}else{Q.push({status:"retained",value:H[--I]});--ae}}}if(ab.length&&Z.length){var T=af*10,R,G,N,ac,aa;for(R=G=0;(O||R<T)&&(ac=ab[G]);G++){for(N=0;aa=Z[N];N++){if(ac.value===aa.value){ac.moved=aa.index;aa.moved=ac.index;Z.splice(N,1);R=N=0;break}}R+=N}}return Q.reverse()}return C})();t.exportSymbol("utils.compareArrays",t.utils.compareArrays);(function(){function C(F){while(F.length&&!t.utils.domNodeIsAttachedToDocument(F[0])){F.splice(0,1)}if(F.length>1){var G=F[0],H=F[F.length-1],I=[G];while(G!==H){G=G.nextSibling;if(!G){return}I.push(G)}Array.prototype.splice.apply(F,[0,F.length].concat(I))}return F}function E(G,K,L,F,I){var J=[];var H=t.dependentObservable(function(){var M=K(L,I)||[];if(J.length>0){t.utils.replaceDomNodes(C(J),M);if(F){t.dependencyDetection.ignore(F,null,[L,M,I])}}J.splice(0,J.length);t.utils.arrayPushAll(J,M)},null,{disposeWhenNodeIsRemoved:G,disposeWhen:function(){return(J.length==0)||!t.utils.domNodeIsAttachedToDocument(J[0])}});return{mappedNodes:J,dependentObservable:(H.isActive()?H:l)}}var D="setDomNodeChildrenFromArrayMapping_lastMappingResult";t.utils.setDomNodeChildrenFromArrayMapping=function(I,F,Y,af,G){F=F||[];af=af||{};var M=t.utils.domData.get(I,D)===l;var U=t.utils.domData.get(I,D)||[];var T=t.utils.arrayMap(U,function(ag){return ag.arrayEntry});var J=t.utils.compareArrays(T,F);var aa=[];var V=0;var ab=0;var ae=[];var R=[];var P=[];var Q=[];var O=[];var X;function N(ag,ah){X=U[ah];if(ab!==ah){Q[ag]=X}X.indexObservable(ab++);C(X.mappedNodes);aa.push(X);R.push(X)}function H(ag,ai){if(ag){for(var ah=0,aj=ai.length;ah<aj;ah++){if(ai[ah]){t.utils.arrayForEach(ai[ah].mappedNodes,function(ak){ag(ak,ah,ai[ah].arrayEntry)})}}}}for(var L=0,K,Z;K=J[L];L++){Z=K.moved;switch(K.status){case"deleted":if(Z===l){X=U[V];if(X.dependentObservable){X.dependentObservable.dispose()}ae.push.apply(ae,C(X.mappedNodes));if(af.beforeRemove){P[L]=X;R.push(X)}}V++;break;case"retained":N(L,V++);break;case"added":if(Z!==l){N(L,Z)}else{X={arrayEntry:K.value,indexObservable:t.observable(ab++)};aa.push(X);R.push(X);if(!M){O[L]=X}}break}}H(af.beforeMove,Q);t.utils.arrayForEach(ae,af.beforeRemove?t.cleanNode:t.removeNode);for(var L=0,ac=t.virtualElements.firstChild(I),W,ad;X=R[L];L++){if(!X.mappedNodes){t.utils.extend(X,E(I,Y,X.arrayEntry,G,X.indexObservable))}for(var S=0;ad=X.mappedNodes[S];ac=ad.nextSibling,W=ad,S++){if(ad!==ac){t.virtualElements.insertAfter(I,ad,W)}}if(!X.initialized&&G){G(X.arrayEntry,X.mappedNodes,X.indexObservable);X.initialized=true}}H(af.beforeRemove,P);H(af.afterMove,Q);H(af.afterAdd,O);t.utils.domData.set(I,D,aa)}})();t.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",t.utils.setDomNodeChildrenFromArrayMapping);t.nativeTemplateEngine=function(){this["allowTemplateRewriting"]=false};t.nativeTemplateEngine.prototype=new t.templateEngine();t.nativeTemplateEngine.prototype.renderTemplateSource=function(G,C,D){var I=!(t.utils.ieVersion<9),F=I?G.nodes:null,E=F?G.nodes():null;if(E){return t.utils.makeArray(E.cloneNode(true).childNodes)}else{var H=G.text();return t.utils.parseHtmlFragment(H)}};t.nativeTemplateEngine.instance=new t.nativeTemplateEngine();t.setTemplateEngine(t.nativeTemplateEngine.instance);t.exportSymbol("nativeTemplateEngine",t.nativeTemplateEngine);(function(){t.jqueryTmplTemplateEngine=function(){var F=this.jQueryTmplVersion=(function(){if((typeof(j)=="undefined")||!(j.tmpl)){return 0}try{if(j.tmpl["tag"]["tmpl"]["open"].toString().indexOf("__")>=0){return 2}}catch(G){}return 1})();function D(){if(F<2){throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}}function E(G,H,I){return j.tmpl(G,H,I)}this["renderTemplateSource"]=function(M,G,J){J=J||{};D();var K=M.data("precompiled");if(!K){var N=M.text()||"";N="{{ko_with $item.koBindingContext}}"+N+"{{/ko_with}}";K=j.template(null,N);M.data("precompiled",K)}var H=[G["$data"]];var I=j.extend({koBindingContext:G},J.templateOptions);var L=E(K,H,I);L.appendTo(i.createElement("div"));j.fragments={};return L};this["createJavaScriptEvaluatorBlock"]=function(G){return"{{ko_code ((function() { return "+G+" })()) }}"};this["addTemplate"]=function(H,G){i.write("<script type='text/html' id='"+H+"'>"+G+"</script>")};if(F>0){j.tmpl["tag"]["ko_code"]={open:"__.push($1 || '');"};j.tmpl["tag"]["ko_with"]={open:"with($1) {",close:"} "}}};t.jqueryTmplTemplateEngine.prototype=new t.templateEngine();var C=new t.jqueryTmplTemplateEngine();if(C.jQueryTmplVersion>0){t.setTemplateEngine(C)}t.exportSymbol("jqueryTmplTemplateEngine",t.jqueryTmplTemplateEngine)})()})})(window,document,navigator,d);f.observable=function(h){if(typeof(h)==="object"&&h.constructor==Array){return c.observableArray(h)}if(typeof(h)==="function"){return c.computed(h)}return c.observable(h)};f.applyBindings=function(h){if(!h.node){h.node=window.document.body}if(h.binding){c.applyBindingsToNode(h.node,h.binding,h.viewModel)}else{c.applyBindings(h.viewModel,h.node)}};f.inject=function(h){var k='<script id="'+h.id+'" type="text/html">';k+=h.content;k+="</script>";if(typeof h.target=="undefined"||h.target.toLowerCase()=="body"){var i=document.createElement("div");i.setAttribute("style","display:none;");document.body.appendChild(i);c.utils.setHtml(i,k)}else{var j=b.Sizzle(h.target)[0];c.utils.setHtml(j,k)}};f.clearNode=function(h){c.cleanNode(h)};c.bindingHandlers.cssClass={update:function(h,j){var i=c.utils.unwrapObservable(j());h.className=i}};f.bindingHandlers=c.bindingHandlers})(b.Templating=b.Templating||{})})(window.xRTML=window.xRTML||{});(function(b,a){(function(n,r){var l=b.Common.Util.guidGenerator;var p=function(B){var A=this;var x=B.name||"";var y=B.namespace||"";var t=B.description||"";var z=B.properties||r;var v=B.methods||r;var u=B.events||r;var s=B.classes||r;var w=B.modules||r;this.Name=(function(){return x})();this.Namespace=(function(){return y})();this.Description=(function(){return t})();this.Properties=(function(){return z})();this.Methods=(function(){return v})();this.Events=(function(){return u})();this.Classes=(function(){return s})();this.Modules=(function(){return w})()};var h=function(C){var A=this;var x=C.name||"";var y=C.namespace||"";var s=C.base||r;var B=C.subclasses||r;var t=C.constructors||r;var u=C.description||"";var z=C.properties||r;var w=C.methods||r;var v=C.events||r;this.Name=(function(){return x})();this.Namespace=(function(){return y})();this.Base=(function(){return s})();this.Subclasses=(function(){return B})();this.Constructors=(function(){return t})();this.Description=(function(){return u})();this.Properties=(function(){return z})();this.Methods=(function(){return w})();this.Events=(function(){return v})();this.toString=function(){return(this.Namespace.length>0)?this.Namespace+"."+this.Name:this.Name};this.typeOf=C.typeOf||function(){return A.toString()}};var q=function(w){var u=w.name||"";var s=w.description||"";var t=w.mandatory||false;var v=w.type||r;this.Name=(function(){return u})();this.Description=(function(){return s})();this.Mandatory=(function(){return t})();this.Type=(function(){return v})()};var o=function(x){var v=x.name||"";var t=x.description||"";var s=x.arguments||"";var w=x["return"]||r;var u=x.exceptions||"";this.Name=(function(){return v})();this.Description=(function(){return t})();this.Arguments=(function(){return s})();this.Return=(function(){return w})();this.Exceptions=(function(){return u})()};var g=function(w){var u=w.name||"";var s=w.description||"";var t=w.mandatory||false;var v=w.type||r;this.Name=(function(){return u})();this.Description=(function(){return s})();this.Mandatory=(function(){return t})();this.Type=(function(){return v})()};var i=function(u){var t=u.name||"";var s=u.handler||r;this.Name=(function(){return t})();this.Handler=(function(){return s})()};var m=function(w){var u=w.name||"";var v=w.namespace||"";var t=w.description||"";var s=w.arguments||r;this.Name=(function(){return u})();this.Namespace=(function(){return v})();this.Description=(function(){return t})();this.Arguments=(function(){return s})()};var c={root:new p({name:"root",classes:{String:new h({name:"String",typeOf:function(){return"String"}}),Number:new h({name:"String",typeOf:function(){return"Number"}}),Boolean:new h({name:"String",typeOf:function(){return"Boolean"}}),Function:new h({name:"String",typeOf:function(){return"Function"}}),Array:new h({name:"String",typeOf:function(){return"Array"}}),Function:new h({name:"String",typeOf:function(){return"Function"}}),Date:new h({name:"String",typeOf:function(){return"Date"}}),Object:new h({name:"String",typeOf:function(){return"Object"}}),RegExp:new h({name:"String",typeOf:function(){return"RegExp"}}),Error:new h({name:"String",typeOf:function(){return"Error"}})},modules:{xRTML:new p({name:"xRTML",modules:{Tags:new p({name:"Tags",classes:new Object()})}}),Anonymous:new p({name:"Anonymous"})}})};var d={};var f=function(u,t,s){if(!d[u]){d[u]=new Array()}d[u].push({reference:t,propertyName:s})};n.fixUnresolvedTypes=function(){for(var u in d){var s=j(u);if(s){for(var t=0;t<d[u].length;t++){d[u][t].reference[d[u][t].propertyName]=s}delete d[u]}}for(var u in d){console.warn(u+" -> "+d[u].length)}};var k=function(w){if(w==r||w.length==0){return c.root}var u,s,v=w.lastIndexOf(".");if(v===-1){s=w}else{u=w.substring(0,v);s=w.substring(v+1)}var t=c.root;if(u!=r){t=k(u)}return t.Modules[s]};var j=function(w){var u,s,v=w.lastIndexOf(".");if(v===-1){s=w}else{u=w.substring(0,v);s=w.substring(v+1)}var t=c.root;if(u!=r){t=k(u)}return(t)?t.Classes[s]:r};n.registerModule=function(K){var E,D,I=K.name.lastIndexOf(".");if(I!=-1){K.namespace=K.name.substring(0,I);K.name=K.name.substring(I+1)}var J=new p({name:K.name,namespace:K.namespace,description:K.description});var D=k(K.namespace);if(!D.Modules){D.Modules={}}D.Modules[K.name]=J;for(var L=0;L<K.classes.length;L++){this.registerClass(K.classes[L])}var F={};for(var G in K.properties){var H=r;if(K.properties[G].type instanceof String||typeof(K.properties[G].type)=="string"){H=j(K.properties[G].type)}else{H=this.registerClass(K.properties[G].type)}F[G]=new q({name:G,description:K.properties[G].description,mandatory:K.properties[G].mandatory,type:H});if(!F[G].Type){f(K.properties[G],F[G],"Type")}}var C={};for(var B in K.methods){var u={};for(var s in K.methods[B].arguments){var t=r;if(K.methods[B].arguments[s].type instanceof String||typeof(K.methods[B].arguments[s].type)=="string"){t=j(K.methods[B].arguments[s].type)}else{t=this.registerClass(K.methods[B].arguments[s].type)}u[s]=new g({name:s,description:K.methods[B].arguments[s].description,mandatory:K.methods[B].arguments[s].mandatory,type:t});if(!u[s].Type){f(K.methods[B].arguments[s],u[s],"Type")}}var z={};for(var L=0;L<K.methods[B].exceptions.length;L++){if(K.methods[B].exceptions[L] instanceof String||typeof(K.methods[B].exceptions[L])=="string"){var y=j(K.methods[B].exceptions[L]);if(y!=r){z[y.toString()]=y}else{throw"Type "+K.methods[B].exceptions[L]+" is not defined"}}else{var y=this.registerClass(K.methods[B].exceptions[L]);z[y.toString()]=y}}var A={name:B,description:K.methods[B].description,arguments:u,exceptions:z};if(K.methods[B]["return"]){if(K.methods[B]["return"] instanceof String||typeof(K.methods[B]["return"])=="string"){A["return"]=j(K.methods[B]["return"])}else{A["return"]=this.registerClass(K.methods[B]["return"])}}C[B]=new o(A);if(K.methods[B]["return"]&&!C[B].Return){f(K.methods[B]["return"],C[B],"Return")}}var x={};for(var w in K.events){var v=r;if(K.events[w].type instanceof String||typeof(K.events[w].type)=="string"){v=j(K.events[w].handler)}else{v=this.registerHandler(K.events[w].handler)}x[w]=new i({name:w,description:K.events[w].description,handler:v})}J.Properties=F;J.Methods=C;J.Events=x;return J};n.registerClass=function(K){if(K.name==r){K.name=l()}if(K.namespace==r){K.namespace="Anonymous"}var v=r;if(K["extends"]){v=j(K["extends"])}var M=function(P){var O={};for(var N in P){O[N]=P[N]}return O};var G=(v)?M(v.Properties):{};for(var H in K.properties){var I=r;if(K.properties[H].type instanceof String||typeof(K.properties[H].type)=="string"){I=j(K.properties[H].type)}else{I=this.registerClass(K.properties[H].type)}G[H]=new q({name:H,description:K.properties[H].description,mandatory:K.properties[H].mandatory,type:I});if(!G[H].Type){f(K.properties[H].type,G[H],"Type")}}var w=(v)?M(v.constructors):{};for(var D in K.constructors){var u={};for(var s in K.constructors[D].arguments){var t=r;if(K.constructors[D].arguments[s].type instanceof String||typeof(K.constructors[D].arguments[s].type)=="string"){t=j(K.constructors[D].arguments[s].type)}else{t=this.registerClass(K.constructors[D].arguments[s].type)}u[s]=new g({name:s,description:K.constructors[D].arguments[s].description,mandatory:K.constructors[D].arguments[s].mandatory,type:t});if(!u[s].Type){f(K.constructors[D].arguments[s].type,u[s],"Type")}}var B={};for(var L=0;L<K.constructors[D].exceptions.length;L++){if(K.constructors[D].exceptions[L] instanceof String||typeof(K.constructors[D].exceptions[L])=="string"){var A=j(K.constructors[D].exceptions[L]);B[A.toString()]=A;if(!B[A.toString()]){f(K.constructors[D].exceptions[L],B,A.toString())}}else{var A=this.registerClass(K.constructors[D].exceptions[L]);B[A.toString()]=A}}var C={name:D,description:K.constructors[D].description,arguments:u,exceptions:B};if(K.constructors[D]["return"]){if(K.constructors[D]["return"] instanceof String||typeof(K.constructors[D]["return"])=="string"){C["return"]=j(K.constructors[D]["return"])}else{C["return"]=this.registerClass(K.constructors[D]["return"])}}w[D]=new o(C);if(K.constructors[D]["return"]&&!w[D].Return){f(K.constructors[D]["return"],w[D],"Return")}}var E=(v)?M(v.Methods):{};for(var D in K.methods){var u={};for(var s in K.methods[D].arguments){var t=r;if(K.methods[D].arguments[s].type instanceof String||typeof(K.methods[D].arguments[s].type)=="string"){t=j(K.methods[D].arguments[s].type)}else{t=this.registerClass(K.methods[D].arguments[s].type)}u[s]=new g({name:s,description:K.methods[D].arguments[s].description,mandatory:K.methods[D].arguments[s].mandatory,type:t});if(!u[s].Type){f(K.methods[D].arguments[s].type,u[s],"Type")}}var B={};for(var L=0;L<K.methods[D].exceptions.length;L++){if(K.methods[D].exceptions[L] instanceof String||typeof(K.methods[D].exceptions[L])=="string"){var A=j(K.methods[D].exceptions[L]);B[A.toString()]=A;if(!B[A.toString()]){f(K.methods[D].exceptions[L],B,A.toString())}}else{var A=this.registerClass(K.methods[D].exceptions[L]);B[A.toString()]=A}}var C={name:D,description:K.methods[D].description,arguments:u,exceptions:B};if(K.methods[D]["return"]){if(K.methods[D]["return"] instanceof String||typeof(K.methods[D]["return"])=="string"){C["return"]=j(K.methods[D]["return"])}else{C["return"]=this.registerClass(K.methods[D]["return"])}}E[D]=new o(C);if(K.methods[D]["return"]&&!E[D].Return){f(K.methods[D]["return"],E[D],"Return")}}var z=(v)?M(v.Events):{};for(var y in K.events){var x=r;if(K.events[y].type instanceof String||typeof(K.events[y].type)=="string"){x=j(K.events[y].handler)}else{x=this.registerHandler(K.events[y].handler)}z[y]=new i({name:y,description:K.events[y].description,handler:x})}var J=new h({name:K.name,namespace:K.namespace,base:v,description:K.description,properties:G,constructors:w,methods:E,events:z});if(K["extends"]&&!J.Base){f(K["extends"],J,"Base")}var F=k(K.namespace);if(!F.Classes){F.Classes={}}F.Classes[K.name]=J;if(v){if(typeof v.Subclasses=="undefined"){v.Subclasses=new Object()}v.Subclasses[J.toString()]=J}return J};n.registerHandler=function(x){if(x.name==r){x.name=l()}if(x.namespace==r){x.namespace="Anonymous"}var u={};for(var s in x.arguments){var t=r;if(x.arguments[s].type instanceof String||typeof(x.arguments[s].type)=="string"){t=j(x.arguments[s].type)}else{t=this.registerClass(x.arguments[s].type)}u[s]=new g({name:s,description:x.arguments[s].description,mandatory:x.arguments[s].mandatory,type:t});if(!u[s].Type){f(x.arguments[s].type,u[s],"Type")}}var v=new m({name:x.name,namespace:x.namespace,description:x.description,arguments:u});var w=k(x.namespace);if(!w.Classes){w.Classes={}}w.Classes[x.name]=v;return v};n.getClass=function(s){return j(s)};n.getModule=function(s){return(s)?k(s):c.root};n.validateProperties=function(v,t){var s=(v instanceof String||typeof(v)=="string")?j(v):v;for(var u in s.Properties){if(s.Properties[u].Mandatory==true&&t[u]===r){return false}if(s.Properties[u].Mandatory==false&&t[u]===r){continue}if(s.Properties[u].Type==n.get("Object")&&typeof(t[u])=="object"){continue}if(s.Properties[u].Type==n.get("String")){if(t[u] instanceof String||typeof(t[u])=="string"){continue}else{return false}}if(s.Properties[u].Type==n.get("Number")){if(!isNaN(parseFloat(t[u]))&&isFinite(t[u])){continue}else{return false}}if(s.Properties[u].Type==n.get("Boolean")){if(t[u] instanceof Boolean||typeof(t[u])=="boolean"){continue}else{return false}}if(s.Properties[u].Type==n.get("Array")){if(typeof(t[u])==="object"&&t[u].constructor==Array){continue}else{return false}}if(s.Properties[u].Type==n.get("Function")){if(t[u] instanceof Function){continue}else{return false}}if(n.validateProperties(s.Properties[u].Type,t[u])){continue}return false}return true}})(b.Metadata=b.Metadata||{})})(window.xRTML=window.xRTML||{});(function(b,a){b.TagManager.register({name:"Shoutbox",struct:function(){var j=function(l){if(typeof l!="undefined"){this.id=l.id?l.id:b.Common.Util.guidGenerator();this.name=typeof l.name!="undefined"&&l.name!=""?b.Templating.observable(l.name):b.Templating.observable("Write a username...");this.logged=typeof l.logged!="undefined"?b.Templating.observable(l.logged):b.Templating.observable(false)}else{this.id=b.Common.Util.guidGenerator();this.name=b.Templating.observable("Write a username...");this.logged=b.Templating.observable(false)}this.isTyping=b.Templating.observable(false)};var g=function(l){this.content=l.content;this.name=l.name;this.date=l.date?new Date(l.date):new Date().toString()};var i=function(l){b.Event.extend(this);this.shoutboxContainer=l.shoutboxContainer;var m=b.Common.DOM.getStyle({element:this.shoutboxContainer,rule:"display"});this.owner=new j();this.messages=b.Templating.observable([]);this.users=b.Templating.observable([]);if(l.userData){this.owner.id=l.userData.id;this.owner.name(l.userData.name);this.owner.logged(true);this.users.push(this.owner);this.fire({sendMessage:{action:"userLogin",data:{id:this.owner.id,name:this.owner.name(),logged:true,isTyping:false}}});this.fire({userLogin:{user:{id:this.owner.id,name:this.owner.name(),logged:true,isTyping:false}}})}this.messageContent=b.Templating.observable("");this.logIn=function(){if(this.owner.name()!=""&&this.owner.name()!="Write a username..."){var o=b.Common.Util.guidGenerator();this.owner.id=o;this.owner.logged(true);this.users.push(this.owner);b.Common.Cookie.setCookie({name:c,value:b.JSON.stringify({id:this.owner.id,name:this.owner.name()})});if(f){f.fire({userLogin:{user:{id:this.owner.id,name:this.owner.name(),logged:true,isTyping:false}}})}this.fire({userLogin:{user:{id:this.owner.id,name:this.owner.name(),logged:true,isTyping:false}}});this.fire({sendMessage:{action:"userLogin",data:{id:this.owner.id,name:this.owner.name(),logged:true}}})}return true};this.logOut=function(){this.owner.logged(false);b.Common.Cookie.deleteCookie({name:c});if(f){f.fire({userLogout:{user:{id:this.owner.id,name:this.owner.name(),logged:true,isTyping:false}}})}this.fire({userLogout:{user:{id:this.owner.id,name:this.owner.name(),logged:false,isTyping:false}}});this.fire({sendMessage:{action:"userLogout",data:{id:this.owner.id,name:this.owner.name(),logged:false,isTyping:false}}});this.owner.name("Write a username...");return true};this.getUserById=function(p){var q=this.users();for(var o=0;o<q.length;++o){if(q[o].id==p){return q[o]}}return null};this.newUser=function(o){var p=this.getUserById(o.id);if(p!=null){p=new j(o)}else{this.users.push(new j(o))}};this.removeUser=function(o){this.users.remove(function(p){return p.id==o})};this.usersTyping=b.Templating.observable(b.Common.Function.proxy(function(){var r="";var q=this.users();if(q.length==0){return""}for(var o=0;o<q.length;o++){var p=q[o];if(p.id!=this.owner.id&&p.isTyping()){r+=p.name()+", "}}return r!=""?r.slice(0,r.length-2):""},this));this.newMessage=function(o){this.messages.push(o);if(b.Common.DOM.getStyle({element:this.shoutboxContainer,rule:"display"})=="none"){this.show()}};this.sendMessage=function(o){if(this.messageContent().length>0){var p=new g({name:o.name||this.owner.name(),content:o.content||this.messageContent()});this.newMessage(p);this.fire({sendMessage:{action:"post",data:p}});if(f){f.fire({messagePost:{message:p}})}this.fire({messagePost:{message:p}});this.messageContent("")}};var n=false;this.sendTypingMessage=function(){if(n!=this.owner.isTyping()){n=!n;this.fire({sendMessage:{action:"typing",data:{id:this.owner.id,name:this.owner.name(),logged:true,typing:this.owner.isTyping()}}});this.fire({userTyping:{user:{id:this.owner.id,name:this.owner.name(),logged:true,typing:this.owner.isTyping()}}})}};this.getUserIndexById=function(p){var q=this.users();for(var o=0;o<q.length;++o){if(q[o].id==p){return o}}};this.setUserTyping=function(o){var p=this.getUserById(o.id);if(p){p.isTyping(o.typing);this.fire({userTyping:{user:{id:p.id,name:p.name(),logged:true,typing:p.isTyping()}}})}};this.close=function(){this.shoutboxContainer.style.display="none";this.fire({close:{}});return true};this.show=function(){this.shoutboxContainer.style.display=m;this.fire({show:{}})};this.initialData=l.initialData};var k=function(){var m;var n;var o=null;var l;return{init:function(r,s,p,t,q){n=parseInt(s());m=t.owner;l=t;b.Event.bind(r,{keypress:function(u){var v=u?u:event;var w=v.keyCode?v.keyCode:v.which?v.which:v.charCode;if(w==13&&!v.shiftKey){if(v.preventDefault){v.preventDefault()}else{v.returnValue=false}l.sendMessage({name:m.name(),content:l.messageContent()});m.isTyping(false);clearTimeout(o);l.sendTypingMessage();return true}m.isTyping(true);if(o!=null){clearTimeout(o)}o=setTimeout(function(){m.isTyping(false);o=null;l.sendTypingMessage()},n);return true},keydown:function(u){var v=u?u:event;var w=v.keyCode?v.keyCode:v.which?v.which:v.charCode;if(w==8||w==46){m.isTyping(l.messageContent().length>0);if(o!=null){clearTimeout(o)}o=setTimeout(function(){m.isTyping(false);o=null},n);if(w==13&&!v.shiftKey){if(v.preventDefault){v.preventDefault()}else{v.returnValue=false}}}return true},keyup:function(u){var w=u?u:event;var x=w.keyCode?w.keyCode:w.which?w.which:w.charCode;var v=w.srcElement?w.srcElement:w.target;if(x==13&&!w.shiftKey){v.value=""}l.messageContent(v.value);if(x==8||x==46){m.isTyping(l.messageContent().length>0);if(o!=null){clearTimeout(o);o=null}o=setTimeout(function(){m.isTyping(false);o=null},n)}l.sendTypingMessage();return true}})}}};var d=function(l){b.Event.extend(this);var m=b.StorageManager.getById(l.id),n=l.key;this.getAndUpdateUsers=function(){m.get({namespace:"Shoutbox",k:n+"#usersCount"},function(q){if(Number(q.data.resultData)){var p=[];for(var o=1;o<=Number(q.data.resultData);o++){p.push(n+"#users#"+o)}m.get({namespace:"Shoutbox",ks:p},function(t){if(t.data.resultData){for(var r=0,s=t.data.resultData.length;r<s;r++){if(t.data.resultData[r]!=null){h.newUser(b.JSON.parse(t.data.resultData[r]))}}}})}})};this.getAndUpdateMessages=function(){m.get({namespace:"Shoutbox",k:n+"#messagesCount"},function(s){if(s.data.resultData){var q=[];for(var o=1;o<=Number(s.data.resultData);o++){q.push(n+"#messages#"+o)}m.get({namespace:"Shoutbox",ks:q},function(v){if(v.data.resultData){for(var t=0,u=v.data.resultData.length;t<u;t++){h.newMessage(new g(b.JSON.parse(v.data.resultData[t])))}}})}else{if(b.Common.Array.isArray(h.initialData)){for(var o=0;o<h.initialData.length;++o){var p=h.initialData[o];var r=new g({name:p.name,content:p.content,data:p.data});h.newMessage(r);f.addMessage(r)}}}})};this.addUser=function(o){m.incr({namespace:"Shoutbox",pair:{k:n+"#usersCount",v:1}},function(p){m.set({namespace:"Shoutbox",pair:{k:n+"#users#"+p.data.resultData,v:b.JSON.stringify(o)}},function(q){})})};this.removeUser=function(o){m.get({namespace:"Shoutbox",k:n+"#usersCount"},function(p){m.del({namespace:"Shoutbox",k:n+"#users#"+(h.getUserIndexById(o)+1)},function(q){});m.incr({namespace:"Shoutbox",pair:{k:n+"#usersCount",v:-1}},function(q){})})};this.addMessage=function(o){m.incr({namespace:"Shoutbox",pair:{k:n+"#messagesCount",v:1}},function(p){m.set({namespace:"Shoutbox",pair:{k:n+"#messages#"+p.data.resultData,v:b.JSON.stringify(o)}},function(q){})})}};var h;var c;var f;this.init=function(q,m){this._super(q);b.Templating.bindingHandlers.userTypingBinding=new k();this.template=q.attribute("template");if(!this.template){var o=' <div class="xrtml-shoutbox">';o+='        <div class="xrtml-shoutbox-close" data-bind="click: close">X</div>';o+='        <div class="xrtml-shoutbox-notificationcontainer" data-bind="visible: usersTyping().length > 0">';o+='            <span class="xrtml-shoutbox-notificationcontainer-userstypinglabel">Users typing: </span>';o+='            <span class="xRTML-Shoutbox-NotificationContainer-UsersTyping" data-bind="text: usersTyping()"></span>';o+="        </div>";o+='        <div class="xrtml-shoutbox-shoutscontainer" data-bind="template: { name: \'xrtml-shouts-template\', foreach: messages }"></div>';o+='        <div class="xrtml-shoutbox-loginform" data-bind="visible: !owner.logged()">';o+='            <input class="xrtml-shoutbox-loginform-username" type="text" data-bind="value: owner.name"></input>';o+='            <input class="xrtml-shoutbox-loginform-login" type="button" value="Log In" data-bind="click: logIn"></input>';o+="        </div>";o+='        <div class="xrtml-shoutbox-shoutform" data-bind="visible: owner.logged()">';o+='            <label class="xrtml-shoutbox-shoutform-usernamelabel" data-bind="text: owner.name()"></label>';o+='            <textarea class="xrtml-shoutbox-shoutform-shoutcontent" data-bind="value: messageContent, userTypingBinding: 3000 " rows="1" cols="50"></textarea>';o+='            <input class="xrtml-shoutbox-shoutform-send" type="button" value="Send" data-bind="click: sendMessage"></input>';o+='            <input class="xrtml-shoutbox-shoutform-logout" type="button" value="Log Out" data-bind="click: logOut"></input>';o+="        </div>";o+="    </div>";this.template="xrtml-shoutbox-template";b.Templating.inject({id:this.template,content:o})}this.initialData=q.attribute("initialData");if(this.storage){f=new d(this.storage);f.bind({requestData:function(){f.getAndUpdateUsers();f.getAndUpdateMessages()},messagePost:b.Common.Function.proxy(function(s){f.addMessage(s.message)},this),userLogin:function(s){f.addUser(s.user)},userLogout:function(s){f.removeUser(s.user.id)}});this.bind({postInit:function(){f.fire({requestData:{}})}})}else{b.Console.debug("Tag "+this.name+" "+this.id+": Storage was not configured. The data will not be persistent.")}var r=b.Common.Function.parse;this.bind({message:r(q.attribute("onMessage")),messagePost:r(q.attribute("onMessagePost")),userLogin:r(q.attribute("onUserLogin")),userLogout:r(q.attribute("onUserLogout")),userTyping:r(q.attribute("onUserTyping")),close:r(q.attribute("onClose")),show:r(q.attribute("onShow"))});c="xRTMLShoutbox-"+this.id;var n=b.Common.Cookie.getCookie({name:c});var l={shoutboxContainer:this.target[0],initialData:this.initialData};if(n){l.userData=b.JSON.parse(n)}h=this.model=new i(l);h.bind({sendMessage:b.Common.Function.proxy(function(s){this.sendMessage(s)},this),messagePost:b.Common.Function.proxy(function(s){this.fire({messagePost:{message:s.message}})},this),userLogin:b.Common.Function.proxy(function(s){this.fire({userLogin:{user:s.user}})},this),userLogout:b.Common.Function.proxy(function(s){this.fire({userLogout:{user:s.user}})},this),userTyping:b.Common.Function.proxy(function(s){this.fire({userTyping:{user:s.user}})},this),close:b.Common.Function.proxy(function(s){this.fire({close:{}})},this),show:b.Common.Function.proxy(function(s){this.fire({show:{}})},this)});try{b.Templating.applyBindings({node:this.target[0],binding:{template:{name:this.template,data:h}}})}catch(p){b.Error.raise({code:b.Error.Codes.TEMPLATING,target:this,info:{message:p.message,className:"xRTML.Tags."+this.name,methodName:"init"}})}if(typeof m!="undefined"&&q.name=="Shoutbox"){m(this)}};this.post=function(l){try{h.newMessage(new g(l))}catch(m){b.Error.raise({code:b.Error.Codes.TEMPLATING,target:this,info:{message:m.message,className:"xRTML.Tags."+this.name,methodName:"post"}})}this.fire({message:{message:l}})};this.userLogin=function(l){var n=new j(l);try{h.newUser(n)}catch(m){b.Error.raise({code:b.Error.Codes.TEMPLATING,target:this,info:{message:m.message,className:"xRTML.Tags."+this.name,methodName:"login"}})}this.fire({userLogin:{user:{id:n.id,isTyping:n.isTyping(),logged:n.logged(),name:n.name(),isTyping:false}}})};this.userLogout=function(m){var n=h.getUserById(m.id);try{h.removeUser(m.id)}catch(l){b.Error.raise({code:b.Error.Codes.TEMPLATING,target:this,info:{message:l.message,className:"xRTML.Tags."+this.name,methodName:"logout"}})}if(n!=null){this.fire({userLogout:{user:{id:n.id,isTyping:n.isTyping(),logged:n.logged(),name:n.name(),isTyping:false}}})}};this.typing=function(m){var n=h.getUserById(m.id);if(n==null){h.newUser({id:m.id,name:m.name,logged:true})}try{h.setUserTyping(m)}catch(l){b.Error.raise({code:b.Error.Codes.TEMPLATING,target:this,info:{message:l.message,className:"xRTML.Tags."+this.name,methodName:"typing"}})}var n=h.getUserById(m.id)};this.login=function(l){if(!h.owner||(h.owner&&h.owner.logged())){return}h.owner.id=l.id;h.owner.name(l.name);h.owner.logged(true);h.users.push(h.owner);b.Common.Cookie.setCookie({name:c,value:b.JSON.stringify({id:h.owner.id,name:h.owner.name()})});h.fire({sendMessage:{action:"userLogin",data:{id:h.owner.id,name:h.owner.name(),logged:true,isTyping:false}}});this.fire({userLogin:{user:{id:h.owner.id,name:h.owner.name(),logged:true,isTyping:false}}});return};this.logout=function(){if(!h.owner||(h.owner&&!h.owner.logged())){return}h.owner.logged(false);b.Common.Cookie.deleteCookie({name:c});if(f){f.fire({userLogout:{user:h.owner}})}h.fire({sendMessage:{action:"userLogout",data:{id:h.owner.id}}});h.owner.name("Write a username...");return};this.show=function(){h.show()};this.close=function(){h.close()};this.dispose=function(){b.Common.Cookie.deleteCookie({name:c});while(this.target[0].firstChild){this.target[0].removeChild(this.target[0].firstChild)}this._super()}}})})(window.xRTML=window.xRTML||{});(function(a){(function(c,b){c[xRTML.version]?xRTML=c[xRTML.version]:c[xRTML.version]=xRTML;c.current=c.current||xRTML.version;xRTML=c[c.current]})(a.xRTMLVersions=a.xRTMLVersions||{})})(window);